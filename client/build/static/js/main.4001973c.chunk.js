(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{250:function(e,t,a){e.exports=a.p+"static/media/pi_pie.90b4f22b.svg"},251:function(e,t,a){e.exports=a.p+"static/media/pi_pi.27d4ed5a.svg"},283:function(e,t,a){e.exports=a(524)},293:function(e,t,a){},524:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a(31),i=a(70),l=a.n(i),s=a(19),u=a(61),m=a(249),d=(a(292),a(293),a(16)),p=a(72),f=Object(u.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETUP_CHANGED":return Object(d.a)({},e,t.data);case"ORDER_COUNTER":return Object(d.a)({},e,{order_counter:e.order_counter+1});case"CUSTOMER_COUNTER":return Object(d.a)({},e,t.data);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SIGNED":return t.user;case"USER_LOCATION":return Object(d.a)({},e,t.user);case"USER_UPDATE_LOCATION":return Object(d.a)({},e,{locations:e.locations.map(function(e,a){return a===t.ind?Object(d.a)({},e,t.data):e})});case"USER_ADD_LOCATION":return Object(d.a)({},e,{locations:e.locations?[].concat(Object(p.a)(e.locations),[t.data]):[t.data]});case"USER_INIT":return Object(d.a)({},e,t.user);default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST":return t.data;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_LIST":return t.order;case"ORDER_CLEAR":return[];default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_LIST":return t.order;case"CART_CLEAR":return[];default:return e}},facs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAC":return console.log("New fac?: ",t.facs),t.fac;case"FAC_STATE":return Object(d.a)({},e,t.data);default:return e}}}),h=a(60),b=a(30),v=a.n(b),g={setUI:function(){return v.a.get("/ui").then(function(e){return e.data})},getLocationList:function(e,t){return v.a.get("/admin/location/"+e+"/"+t).then(function(e){return e.data})},getProductList:function(e){return v.a.get("/products/"+e).then(function(e){return e.data})},getLocation:function(e){return v.a.get("/admin/location/ref/"+e).then(function(e){return e.data})},getLocationFac:function(e){return v.a.post("/user/facs",{id:e}).then(function(e){return e.data})},setupFac:function(e){var t=e.id,a=Object(h.a)(e,["id"]);return v.a.post("/user/fac/"+t,a).then(function(e){})}},E={signup:function(e){return v.a.post("/auth",{credentials:e}).then(function(e){return e.data.user})},checkOne:function(){return v.a.get("/auth/check").then(function(e){return e.data})},initUser:function(){return v.a.get("/user").then(function(e){return e.data.user})},addLocation:function(e){return v.a.post("/user/location",{data:e}).then(function(e){return console.log(e),e.data.id})},updateLocation:function(e,t){return v.a.post("/user/location/"+t,{data:e}).then(function(e){return e.data})}},y={pushOrder:function(e){return v.a.post("/orders",{data:e}).then(function(e){return e.data})},collection:function(e){return v.a.get("/admin/fac/".concat(e,"/orders"))}},O=function(e){return{type:"SETUP_CHANGED",data:e}},C=function(e){return{type:"FAC_STATE",data:e}},j=function(e){return{type:"SET_FAC",fac:e}},S=function(e){return function(t){return g.setUI(e).then(function(e){t(O(e))})}},k=function(e,t){return function(a){return g.getLocationList(e,t).then(function(e){console.log("getLocationsList: ",e),a(O(e))})}},w=function(e){return function(t){return g.getProductList(e).then(function(e){t(function(e){return{type:"PRODUCT_LIST",data:e}}(e))})}},R=function(e){return function(t){return console.log("Socket Action: ",e),e.order?t({type:"ORDER_COUNTER"}):e.hasOwnProperty("open")?t(C({open:e.open})):e.hasOwnProperty("bsocket")?void console.log("Backer socket ".concat(e.bsocket?"open":"closed")):t(function(e){return{type:"CUSTOMER_COUNTER",data:e}}(e))}},N=function(e){return function(t){return g.getLocation(e).then(function(e){if(e)return e}).catch(function(e){return{error:8}})}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?v.a.defaults.headers.common.Authorization=e:delete v.a.defaults.headers.common.Authorization},D=function(e){return{type:"USER_SIGNED",user:e}},L=function(e){return{type:"USER_INIT",user:e}},I=function(e){return{type:"USER_ADD_LOCATION",data:e}},P=function(e,t){return{type:"USER_UPDATE_LOCATION",ind:e,data:t}},x=function(){return function(e){return new Promise(function(t,a){E.initUser().then(function(a){e(L(a)),t(a)}).catch(function(e){a(e)})})}},z=function(e,t){return function(a){g.getLocation(e).then(function(e){a(P(t,e))})}},_=function(e){e?v.a.defaults.headers.common["Accepted-Language"]=e:delete v.a.defaults.headers.common["Accepted-Language"]},T=a(6),F=a.n(T),M=a(525),U=a(535),q=a(250),B=a.n(q),G=a(251),H=a.n(G),J=a(25),W=a(17),Y=a(18),Z=a(21),V=a(20),X=a(9),K=a(82),Q=a.n(K),$=a(536),ee=a(538);function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var ae=function(e){Object(Z.a)(a,e);var t=te(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{},logging:!1,errors:{},ui:{en:["register","example@mail.com","my-secret-password","Save"],es:["registro","micorreo@mail.com","mi-contrasena-secreta","Gurdar"],bg:["\u0432\u043b\u0435\u0437","example@mail.com","\u043f\u0430\u0440\u043e\u043b\u0430","\u0412\u043b\u0435\u0437"]}},e.onSubmit=function(){var t=e.state.data,a=e.props,n=a.pass,r=a.submit,c=a.login,o=e.validate(t);e.setState({errors:o}),0===Object.keys(o).length&&(n?c(t,!0):r(t,!1).then(function(e){}))},e.validate=function(t){var a={};return e.props.pass?t.password.length<8&&(a.password="Minimum password length must be 8 digits!"):Q.a.isEmail(t.email)||(a.email="Invalid email address! Try again..."),a},e.onInput=function(t,a){var n=a.name;e.setState({data:Object(d.a)({},e.state.data,Object(J.a)({},n,t.target.value))})},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.state.ui[this.props.lan],t=this.props.pass,a=this.state.errors;return r.a.createElement("div",{className:t?"custom-form oval-but alert":"custom-form oval-but"},r.a.createElement($.a,{onSubmit:this.onSubmit},r.a.createElement($.a.Input,{fluid:!0,required:!0,inline:!0,centered:!0,focus:!0,onChange:this.onInput,name:t?"password":"email",type:t?"password":"email",placeholder:t?e[2]:e[1]}),Object.keys(a).length>0&&r.a.createElement(ee.a,{negative:!0},r.a.createElement(ee.a.Header,null,t?"Incomplete password:":"Incorrect email:"),r.a.createElement("p",null,t?a.password:a.email)),r.a.createElement(M.a,{type:"submit",fluid:t,color:t?"red":"black"},t?e[3]:e[0])))}}]),a}(r.a.Component),ne=a(99),re=function(e){var t=e.size;return r.a.createElement(ne.a,{size:t,circular:!0,basic:!0},"\u03c0")},ce=function(e){var t=e.lan,a=e.open,n={en:["Play","Eat","Repeat","See"],es:["Jugar","Comer","Repetir","Ver"],bg:["\u0418\u0433\u0440\u0430\u0439","\u042f\u0436","\u041f\u043e\u0432\u0442\u043e\u0440\u0438","\u0412\u0438\u0436"]}[t];return r.a.createElement("div",{className:"menu-bar"},r.a.createElement(M.a.Group,{color:"grey"},r.a.createElement(M.a,{as:c.b,to:"/play",icon:"play circle",content:n[0]}),r.a.createElement(M.a,{as:c.b,to:a?"/order":"/catalog",icon:a?"food":"eye",content:a?n[1]:n[3]}),r.a.createElement(M.a,{as:c.b,to:"/repeat",icon:"undo",content:n[2]})))},oe=a(537),ie=a(48),le=a.n(ie),se=a(539);function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var me=function(e){Object(Z.a)(a,e);var t=ue(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={value:"",results:[],isLoading:!1,data:{},ui:{en:["Cancel","Submit","No service in that City","Sorry:"],es:["Cancelar","Confirmar","Sin servicio en esta Ciudad","Perdona, pero:"],bg:["\u0418\u0437\u0442\u0440\u0438\u0439","\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438","\u041d\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0432\u0430\u043c\u0435 \u0442\u043e\u0437\u0438 \u0433\u0440\u0430\u0434 \u0432\u0441\u0435 \u043e\u0449\u0435...","\u0421\u044a\u0436\u0430\u043b\u044f\u0432\u0430\u043c\u0435, \u043d\u043e:"]}},e.resetComponent=function(){return e.setState({isLoading:!1,results:[],value:""})},e.handleResultSelect=function(t,a){var n=a.result,r=a.name;e.setState(Object(d.a)({},e.state,{value:n.title,data:Object(d.a)({},e.state.data,Object(J.a)({},r,n.id)),message:null})),e.props.appsetup||e.props.onStreet(Object(J.a)({},r,n.id))},e.handleSearchChange=function(t,a){var n=a.value;e.setState({isLoading:!0,value:n}),setTimeout(function(){if(e.state.value.length<1)return e.resetComponent();var t=new RegExp(le.a.escapeRegExp(e.state.value),"i");e.setState({isLoading:!1,results:le.a.filter(e.props.list,function(e){return t.test(e.title)})})},300)},e.onSubmit=function(t){t.preventDefault();var a=e.props,n=a.appsetup,r=a.onSubmit,c=e.state.data;n&&r(c)},e}return Object(Y.a)(a,[{key:"componentWillMount",value:function(){this.resetComponent()}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.results,n=e.isLoading,c=e.data,o=e.message,i=this.state.ui[this.props.lan],l=this.props,s=l.name,u=l.appsetup;return r.a.createElement("div",{className:"custom-form padded"},r.a.createElement($.a.Group,{onSubmit:this.onSubmit},r.a.createElement($.a,null,r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"grid column sixteen wide"},r.a.createElement(se.a,Object.assign({fluid:!0,name:s,loading:n,onResultSelect:this.handleResultSelect,onSearchChange:le.a.debounce(this.handleSearchChange,500,{leading:!0}),results:a,value:t},this.props))),o&&"0"!==o&&r.a.createElement(ee.a,{negative:!0,size:"mini"},r.a.createElement(ee.a.Header,null,i[3]),r.a.createElement("p",null,i[2])),u&&r.a.createElement("div",{className:"grid column sixteen wide oval-but extra-padded"},r.a.createElement(M.a,{type:"submit",basic:0===Object.keys(c).length,disabled:0===Object.keys(c).length,name:s,color:"grey",content:i[1]}))))))}}]),a}(r.a.Component);function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var pe,fe,he=function(e){Object(Z.a)(a,e);var t=de(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["Your City/Zone:","ENG","ESP","\u0411\u0413"],es:["Tu Ciudad/Zona:","ENG","ESP","\u0411\u0413"],bg:["\u0418\u0437\u0431\u0435\u0440\u0438 \u0413\u0440\u0430\u0434/\u0417\u043e\u043d\u0430:","ENG","ESP","\u0411\u0413"]},errors:{en:{header:["Not your City/Zone"],message:["Pick a Zone/City closer to you"]},es:{header:["No es tu Zona o Ciudad"],message:["Seleccione una Zona/Ciudad mas cercana"]},bg:{header:["\u041d\u0435 \u0435 \u0442\u0432\u043e\u044f\u0442 \u0413\u0440\u0430\u0434/\u0417\u043e\u043d\u0430"],message:["\u0418\u0437\u0431\u0435\u0440\u0438 \u0437\u043e\u043d\u0430 \u0438\u043b\u0438 \u0433\u0440\u0430\u0434, \u0431\u043b\u0438\u0437\u043a\u0438 \u0434\u043e \u0442\u0435\u0431"]}},confirm:!1,error:0},e.onLanguage=function(t,a){var n=a.name,r=e.props,c=r.setInterface,o=r.setUI,i=r.getProductList;c({lan:n}),_(n),o(n),i(n)},e.onSubmit=function(t){var a=e.props,n=a.appsetup,r=a.setInterface,c=a.initialUser;if(console.log(t),n){if(1!==e.props.list.find(function(e){return e.id===t.city}).status)return e.setState({error:1,confirm:!0});r(t)}else c(t)},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.lan,n=t.appsetup,c=t.name,o=t.list,i=t.setup,l=this.state.ui[a];return r.a.createElement("div",{className:"vintage left"},"city"===c&&r.a.createElement("p",null,l[0]),r.a.createElement(me,{lan:a,appsetup:n,onSubmit:this.onSubmit,setup:i,name:c,list:o}),r.a.createElement(U.a,{horizontal:!0}),r.a.createElement("div",{className:"menu-bar"},r.a.createElement(M.a.Group,{color:"grey",size:"mini"},r.a.createElement(M.a,{onClick:this.onLanguage,disabled:"en"===a,name:"en",content:l[1]}),r.a.createElement(M.a,{onClick:this.onLanguage,disabled:"es"===a,name:"es",content:l[2]}),r.a.createElement(M.a,{onClick:this.onLanguage,disabled:"bg"===a,name:"bg",content:l[3]}))),r.a.createElement("div",{className:"eight wide column"},r.a.createElement(oe.a,{header:this.state.errors[a].header[this.state.error-1],content:this.state.errors[a].message[this.state.error-1],open:this.state.confirm,onCancel:function(t){return e.setState({confirm:!1,error:0})},onConfirm:function(t){return e.setState({confirm:!1,error:0})}})))}}]),a}(r.a.Component),be=Object(s.b)(function(e){return{lan:e.settings.lan}},{initialUser:L,setInterface:O,setUI:S,getProductList:w})(he),ve=function(e){return{type:"CART_LIST",order:e}},ge=function(){return{type:"CART_CLEAR"}},Ee=function(){return{type:"CART_CLEAR"}},ye=["root","lab","fac","baker","pos","dlv","test","rep","customer"],Oe=function(e,t,a,n){var r=function(e,t,a,n){switch(e){case 2:return n;case 4:case 8:case 64:return a;default:return t}}(t,e,a,null);"rep"===(fe=function(e){var t=e?e.toString(2).split("").reverse():0;console.log("memberships: ",t);var a;return 0===(a=ye.filter(function(e,a){return 1===Number(t[a])})).length?"home":a.length>1?a[a.length-1]:a[0]}(t))&&(fe="customer");var c="wss://pizzapi.co/?id=".concat(r,"&fac=").concat(a);console.log("Role/ID: ",fe,r),console.log("WS on: ",c),(pe=new WebSocket(c,"".concat(fe,"-protocol"))).onerror=function(e){return console.log("WebSocket error: "+e)},pe.onopen=function(){console.log("Open ".concat(fe,"-Socket on Client")),n({socket:!0})},pe.onclose=function(){console.log("".concat(fe,"-Socket Closed")),n({socket:!1})}},Ce=function(e){console.log("".concat(fe," Suscribed: ").concat(e)),pe.onmessage=function(t){console.log("WS: ",t.data);var a=JSON.parse(t.data);if(!e)return console.log(t.data);e(a)}},je=function(e,t){pe.send(t)},Se=function(e){pe.close()},ke=function(e){var t=e.isAuthorized,a=e.user,n=(e.lab,e.fac),o=e.lan,i=e.city,l=(e.one_city,e.cities),s=e.socket,u=e.signUp,m=e.userInit,d=e.getLocalFacs,p=e.getFacStore,f=e.setInterface,h=e.socketCounter,b=e.addCart,v={ui:{es:["Bienvenido, ","Hola, ","Estas en:","Admin","LAB","FAC","PoS","Courier","REP","CERRADO","La #1 es GRATIS !!!","Margherita"],en:["Hello, ","Welcome back, ","You're in:","Admin","LAB","FAC","PoS","Courier","REP","CLOSED","TAKE #1 FREE !!!","Margherita"],bg:["\u0414\u043e\u0431\u0440\u0435 \u0434\u043e\u0448\u044a\u043b, ","\u0417\u0434\u0440\u0430\u0432\u0435\u0439, ","\u041d\u0430\u043c\u0438\u0440\u0430\u0448 \u0441\u0435 \u0432\u044a\u0432:","Admin","LAB","FAC","PoS","\u041a\u0443\u0440\u0438\u0435\u0440","REP","\u0417\u0410\u0422\u0412\u041e\u0420\u0415\u041d\u041e","#1 e \u0413\u0420\u0410\u0422\u0418\u0421 !!!","\u041c\u0430\u0440\u0433\u0435\u0440\u0438\u0442\u0430"]},error:{header:"Not Your Bakery!",message:"Change Zone/City?"}},g=a.membership,E=a.new_user,y=a.username,O=a.uid,C=a.orders,j=void 0===E||E,S=["boss","lab","fac","baker","pos","dlv","tester","rep","customer"],k=g?g.toString(2).split("").reverse():0,w=[];if(S.forEach(function(e,t){Number(k[t])&&w.push(S[t])}),0===w.length?"home":w.length>1?w.join("/"):w[0],i&&!Object.keys(n).length>0){var R={};R.city=i,p(R)}if(t&&Object.keys(n).length>0&&!s)switch(Oe(O,g,n.id,f),g){case 1:case 2:case 4:break;case 8:case 12:Ce(h);break;default:Ce(h)}var N=new Date("Januar 1, 00 ".concat(n.work_open)),A=new Date("Januar 1, 00 ".concat(n.day_close)),D=new Date("Januar 1, 00 ".concat(n.noon_open)),L=new Date("Januar 1, 00 ".concat(n.work_close)),I=0===C;return r.a.createElement("div",{className:"App-content topped padded"},r.a.createElement("div",{className:"init central padded"},n.open&&I&&i?r.a.createElement("div",{className:"promo oval-but"},r.a.createElement(M.a,{color:"green",content:v.ui[o][10],onClick:function(){return b([{product:1,quant:1,name:v.ui[o][11],price:0,promo:1}])}})):r.a.createElement("div",{className:"logo-still"},r.a.createElement("img",{src:B.a,className:"logo",alt:"logo"}),r.a.createElement("img",{src:H.a,className:"logo-top",alt:"logo"})),void 0!==i&&r.a.createElement("p",{className:"vintage no-border"},o?j?v.ui[o][0]:v.ui[o][1]:"\u0414\u043e\u0431\u0440\u0435 \u0434\u043e\u0448\u044a\u043b",y||r.a.createElement(re,{size:"huge"})),i?t?g>63?r.a.createElement(ce,{lan:o,open:n.open}):null:r.a.createElement(ae,{submit:u,getFacs:d,init:m,lan:o,pass:!1}):r.a.createElement(be,{lan:o,list:l,appsetup:"true",name:"city"}),r.a.createElement(U.a,{horizontal:!0}),t&&g&&g<128&&r.a.createElement(M.a,{basic:!0,color:"blue",as:c.b,to:1!==g&&Object.keys(n).length>0?"/admin/home":"/admin/boss",disabled:!i},"Hello, ",w[w.length-1],"!"),!!i&&!n.open&&a.membership>63&&r.a.createElement("div",{className:"fac-info"},r.a.createElement("div",{className:"fac-lable"},r.a.createElement("div",{className:"fac-closed"},r.a.createElement("h3",null,v.ui[o][9]))),r.a.createElement("p",null,"".concat(N.getHours(),":").concat(N.getMinutes()>0?N.getMinutes():"00"," -\n            ").concat(A.getHours(),":").concat(A.getMinutes()>0?N.getMinutes():"00")),r.a.createElement("p",null,"".concat(D.getHours(),":").concat(D.getMinutes()>0?N.getMinutes():"00"," -\n            ").concat(L.getHours(),":").concat(L.getMinutes()>0?N.getMinutes():"00")))))};ke.propType={lan:F.a.number.isRequired};var we=Object(s.b)(function(e){return{lan:e.settings.lan,socket:e.settings.socket,cities:e.settings.cities,city:e.settings.city,one_city:e.settings.one_city,isAuthorized:!!e.user.token,fac:e.facs,user:e.user}},{signUp:function(e,t){return function(a){if(!t)return new Promise(function(t,n){E.signup(e).then(function(e){localStorage.valePizzaJWT=e.token,A(e.token),a(D(e)),a(function(e){return{type:"USER_INIT",user:e}}(e)),t(e)})})}},userInit:x,getLocalFacs:function(e){return function(e){}},setInterface:O,getFacStore:function(e){var t=e.city;return function(e){return g.getLocationFac(t).then(function(t){e(j(t))})}},addCart:ve,socketCounter:R})(ke),Re=a(54),Ne=a(73),Ae=function(e){var t=e.disabled,a=e.cart;return r.a.createElement("div",null,t?r.a.createElement("div",{className:"user disabled"},r.a.createElement(Ne.a,{inverted:t,name:"user"}),r.a.createElement("span",null,"|"),r.a.createElement(Ne.a,{inverted:t,name:"shopping cart"})):r.a.createElement("div",{className:"user"},r.a.createElement(c.b,{to:"/user"},r.a.createElement(Ne.a,{name:"user"})),r.a.createElement("span",null,"|"),r.a.createElement(c.b,{to:"/cart"},r.a.createElement(Ne.a,{color:a>0?"red":"",name:"shopping cart"}))))},De=function(e){var t=e.city,a=e.fac,o=e.cities,i=e.lan,l=e.isAuthorized,s=e.socket,u=e.user,m=e.cart,p=e.setInterface,f=e.setLocationFactory,h=e.clearCart,b={ui:{en:["No City","? Change City","You are about to change city/zone"],es:["Ciudad","? Cambiar Ciudad","Estas por cambiar la zona/ciuda de tu orden"],bg:["\u0413\u0440\u0430\u0434","? \u0421\u043c\u0435\u043d\u0438 \u0417\u043e\u043d\u0430/\u0413\u0440\u0430\u0434","\u041f\u0440\u0438 \u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0449\u0435 \u0441\u043c\u0435\u043d\u0438\u0448 \u0433\u0440\u0430\u0434\u0430/\u0437\u043e\u043d\u0430\u0442\u0430"]}},v=Object(n.useState)(!1),g=Object(Re.a)(v,2),E=g[0],y=g[1],O=b.ui[i][0];return o&&o.forEach(function(e){e.id===t&&(O=e.alt?e.alt:e.title)}),r.a.createElement("div",{className:"ui grid Top"},r.a.createElement("div",{className:"four wide column"},r.a.createElement(c.b,{to:function(e){if(!a.checkin&&u.membership<63||u.membership>63)return Object(d.a)({},e,{pathname:"/"})}},r.a.createElement(Ne.a,{name:"home",color:!a.checkin||u.membership>63?"black":"grey"})),t&&r.a.createElement(Ne.a.Group,null,r.a.createElement(Ne.a,{color:a.open?"blue":"grey",name:"clock"}))),r.a.createElement("div",{className:"eight wide column"},r.a.createElement(oe.a,{header:b.ui[i][1],content:b.ui[i][2],open:E,onCancel:function(e){return y(!1)},onConfirm:function(e){y(!1),f({}),h(),s&&Se(),p({city:null,socket:!1})}}),r.a.createElement(c.b,{to:"/",onClick:function(e){return y(!0)}},r.a.createElement(Ne.a,{color:t?"blue":"grey",name:"map marker"}),O)),r.a.createElement("div",{className:"four wide column"},r.a.createElement(Ae,{lan:i,cart:m.length,disabled:!(l&&t&&u.membership>64&&1!==u.membership)})))};De.propType={fac:F.a.shape({id:F.a.number.isRequired}).isRequired};var Le=Object(s.b)(function(e){return{lan:e.settings.lan,socket:e.settings.socket,city:e.settings.city,fac:e.facs,cities:e.settings.cities,isAuthorized:!!e.user.token,user:e.user,cart:e.cart}},{setInterface:O,setLocationFactory:j,clearCart:Ee})(De);function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Pe=function(e){Object(Z.a)(a,e);var t=Ie(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={item:{id:null,units:null},ui:{en:["Choose a ","+","Order","Invalid data","Qauntity should be a number","pizza","pi2","drink","beer","sauce"],es:["Selecione ","+","Pedir","Datos invalidos","La Cantidad es numero","pizza","pi2","gaseosa","cerveza","salsa"],bg:["\u0418\u0437\u0431\u0435\u0440\u0438 ","+","\u041f\u043e\u0440\u044a\u0447\u0430\u0439","\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0438 \u0434\u0430\u043d\u043d\u0438","\u0411\u0440\u043e\u044f\u0442 \u043f\u0438\u0446\u0438 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u0447\u0438\u0441\u043b\u043e","\u043f\u0438\u0446\u0430","\u043f2","\u0431\u0435\u0437\u0430\u043b\u043a\u043e\u0445\u043e\u043b\u043d\u043e","\u0431\u0438\u0440\u0430","\u0441\u043e\u0441"]},errors:{}},e.onChange=function(t,a){var n=a.name,r=a.value;"id"===n||""===r||Q.a.isNumeric(r)?e.setState({errors:{}}):e.setState({errors:{code:4}}),"units"===n&&r>5&&(r=5),"id"===n&&e.props.onItemSelect(r),e.setState({item:Object(d.a)({},e.state.item,Object(J.a)({},n,Math.abs(r)))})},e.onAdd=function(){var t=e.state.item;e.props.onAddItem(t.id,t.units),e.setState({item:{id:null,units:null}})},e.shouldComponentUpdate=function(t){return e.props.category!==t.category&&e.setState({item:{id:null,units:null}}),!0},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.props,t=e.lan,a=e.items,n=e.category,c=this.state,o=c.errors,i=c.item,l=this.state.ui[t],s=Object.keys(o).length>0,u=null===i.id||null===i.units;return r.a.createElement($.a,{onSubmit:this.onAdd},r.a.createElement($.a.Group,null,r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"ten wide column"},r.a.createElement($.a.Select,{onChange:this.onChange,key:213,name:"id",placeholder:l[0].concat(l[4+n]),options:a,value:i.id})),r.a.createElement("div",{className:"three wide column"},r.a.createElement($.a.Input,{onChange:this.onChange,type:"number",required:!0,name:"units",placeholder:0,value:i.units||""})),r.a.createElement("div",{className:"three wide column"},r.a.createElement(M.a,{disabled:s||u,color:"blue",className:"add-but",type:"submit",content:l[1]}))),s&&r.a.createElement("div",{className:"margined full-width"},r.a.createElement(ee.a,{negative:!0},r.a.createElement(ee.a.Header,null,l[3]),r.a.createElement("p",null,l[o.code])))))}}]),a}(r.a.Component),xe=function(e){var t=e.stat,a=e.empty,n=e.row,c=e.onDelete,o=e.ind,i=e.lan;return r.a.createElement("div",null,a?{en:["Nothing to order yet...."],es:["Nada de ordenar...."],bg:["\u041d\u0438\u0449\u043e \u0437\u0430 \u043f\u043e\u0440\u044a\u0447\u0432\u0430\u043d\u0435 \u0437\u0430 \u0441\u0435\u0433\u0430..."]}[i][0]:r.a.createElement("div",{className:"ui grid item"},r.a.createElement("div",{className:"two wide column nopad items"},!t&&r.a.createElement(Ne.a,{name:"eye"})),r.a.createElement("div",{className:"six wide column nopad"},n.name),r.a.createElement("div",{className:"three wide column nopad items"},r.a.createElement(Ne.a,{name:"x",size:"tiny"}),n.quant),r.a.createElement("div",{className:"three wide column nopad"},(parseFloat(n.price)*parseFloat(n.quant)).toFixed(2)),r.a.createElement("div",{className:"two wide column nopad"},!t&&r.a.createElement("span",{className:"",basic:!0,onClick:function(){return c(o)}},r.a.createElement(Ne.a,{name:"minus circle"})))))},ze=function(e){var t=e.stat,a=e.cart,n=e.lan,c=e.onDelete;return r.a.createElement("div",{className:0===a.length?"order-list empty":"order-list"},a.map(function(e,a){return r.a.createElement(xe,{stat:t,lan:n,key:a,onDelete:c,row:e,ind:a})}),0===a.length&&r.a.createElement(xe,{empty:!0,lan:n}))};function _e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Te=function(e){Object(Z.a)(a,e);var t=_e(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["pizza order","Order","Pizza","P2","Drink","Beer","Sauce"],es:["pedido","Pedido","Pizza","P2","Gaseosa","Serveza","Salsa"],bg:["\u043f\u043e\u0440\u044a\u0447\u043a\u0430","\u041f\u043e\u0440\u044a\u0447\u0430\u0439","\u041f\u0438\u0446\u0430","\u041f2","\u041d\u0430\u043f\u0438\u0442\u043a\u0430","\u0411\u0438\u0440\u0430","\u0421\u043e\u0441"]},order:[]},e.onDeleteItem=function(t){e.setState({order:[].concat(Object(p.a)(e.state.order.slice(0,t)),Object(p.a)(e.state.order.slice(t+1)))})},e.onAddItem=function(t,a){console.log(e.state.order);var n=e.state.order.findIndex(function(e){return e.product===t&&!e.hasOwnProperty("promo")}),r=e.props.products.findIndex(function(e){return e.id===t});n>-1?e.setState({order:[].concat(Object(p.a)(e.state.order.slice(0,n)),[Object(d.a)({},e.state.order[n],{quant:e.state.order[n].quant+Number(a)})],Object(p.a)(e.state.order.slice(n+1)))}):e.setState({order:e.state.order.concat({product:t,quant:Number(a),name:e.props.products[r].name,price:e.props.products[r].price})})},e.onOrder=function(t){e.props.addCart(e.state.order)},e}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.cart;console.log("OrderComponent Mount: ",e.length),e.length>0&&this.setState({order:this.props.cart})}},{key:"render",value:function(){var e,t=0,a=this.props,n=a.lan,o=a.products,i=(a.facs,a.user,a.category),l=a.itemSelected;e=o.map(function(e,t){return{value:e.product,text:e.name,key:t}});var s=this.state.ui[n],u=this.state.order,m=u.map(function(e){return(parseFloat(e.price)*parseFloat(e.quant)).toFixed(2)});m.length>0&&(t=m.reduce(function(e,t){return(parseFloat(e)+parseFloat(t)).toFixed(2)}));var d=s[1].concat(" ",s[i+1]);return r.a.createElement("div",{className:"custom-form"},r.a.createElement(U.a,{horizontal:!0},d),r.a.createElement(Pe,{lan:n,category:i,items:e,onAddItem:this.onAddItem,onItemSelect:l}),r.a.createElement(ze,{stat:!1,lan:n,cart:u,onDelete:this.onDeleteItem}),r.a.createElement(U.a,{horizontal:!0},"\u25cb"),r.a.createElement(M.a,{as:c.b,to:"/cart",width:8,disabled:0===this.state.order.length,color:"orange",className:"submit-but",content:s[1].concat(": ",t.toString()),onClick:this.onOrder}))}}]),a}(r.a.Component),Fe=Object(s.b)(function(e){return{facs:e.facs,cart:e.cart,order:e.order,user:e.user}},{addCart:ve})(Te),Me=function(e){var t=e.entry,a=e.mode,o=e.lan,i=e.open,l=(e.view,{en:["Orders","MENU >","CLOSED","This Bakery is closed. Try again later..."],es:["Pedidos","CARTA >","CERRADO","La panaderia esta cerrada. Checkea mas tarde..."],bg:["\u041f\u043e\u0440\u044a\u0447\u043a\u0438","\u041c\u0415\u041d\u042e >","\u0417\u0410\u0422\u0412\u041e\u0420\u0415\u041d\u041e","\u041f\u0435\u043a\u0430\u0440\u043d\u0430\u0442\u0430 \u0435 \u0437\u0430\u0442\u0432\u043e\u0440\u0435\u043d\u0430! \u041e\u043f\u0438\u0442\u0430\u0439 \u043f\u043e-\u043a\u044a\u0441\u043d\u043e..."]}),s=Object(n.useState)(!1),u=Object(Re.a)(s,2),m=u[0],d=u[1],p={position:"relative",backgroundImage:"url(img/".concat(["pizza","pi2","drinks","pivo","sauce"][t.category-1],"/").concat(t.list,".png)"),backgroundSize:"cover"},f=t.dscr.split(",").join(", ");return r.a.createElement("div",{className:"ver"===a?"item":"product",style:p},r.a.createElement("span",null,t.name),r.a.createElement("span",{style:{maxWidth:"380px",display:"flex",color:"white",overflowX:"hidden",backgroundColor:"rgba(180,90,0,.5)"}},f),t.category<3&&r.a.createElement("div",{className:"bottom-div"},r.a.createElement(M.a,{size:"small",color:"black",basic:!0,content:"ver"===a?l[o][0]:l[o][1],as:c.b,to:"ver"===a?"/order":"/catalog",onClick:function(e){if(!i&&"ver"===a)return e.preventDefault(),void d(!0)}})),r.a.createElement(oe.a,{header:i?l[o][4]:l[o][2],content:i?l[o][4]:l[o][3],open:m,onConfirm:function(e){return d(!1)},onCancel:function(e){return d(!1)}}))},Ue=function(e){var t,a,n,c=e.products,o=e.lan,i=e.category,l=e.view,s=e.onOrder,u=e.item,m=e.facs,d=e.open;t="hor"===l?100*(c.length+1):100,a=c.findIndex(function(e){return e.id===u}),n="hor"===l?{minWidth:"".concat(t,"vw"),left:"-".concat(97.5*(a+1),"vw")}:{};return r.a.createElement("div",{className:"hor"===l?"product-wraper":null},r.a.createElement("div",{className:"hor"===l?"product-list":"catalog",style:n},r.a.createElement("ul",null,"hor"===l?r.a.createElement("li",null,r.a.createElement("div",{className:"product".concat(" ",["pi","pi2","soft","pivo","sauce","premium"][i-1])})):r.a.createElement("li",null,r.a.createElement(U.a,{horizontal:!0},{en:["MENU PIZZA"],es:["MENU PIZZA"],bg:["\u041c\u0415\u041d\u042e \u041f\u0418\u0426\u0418"]}[o][0])),c.map(function(e){return r.a.createElement("li",null,r.a.createElement(Me,{lan:o,open:m?m.open:d,mode:l,entry:e,onOrder:s}))}))))},qe=function(e){e.lan;for(var t=e.category,a=e.onCategory,n=e.cats,c={bg:["\u043f\u0438\u0446\u0430","\u03c0\xb2","\u043d\u0430\u043f\u0438\u0442\u043a\u0430","\u0431\u0438\u0440\u0430","\u0441\u043e\u0441"],en:["pizza","\u03c0\xb2","drinks","beer","sauce"],es:["pizza","\u03c0\xb2","drinks","beer","salsa"],icon:["\u03c0","\u03c0\xb2","tint","beer","fire"]},o=[],i=1;i<6;i++)n.includes(i)&&o.push(i);return r.a.createElement("div",null,r.a.createElement("ul",{className:"menu-prod"},o.map(function(e){var n=e===t?"active":"";return r.a.createElement("li",{className:e<3?n.concat(" ","pee"):n,onClick:function(n){e!==t&&a(e)}},e<3?c.icon[e-1]:r.a.createElement(Ne.a,{name:c.icon[e-1],size:"large"}))})))};function Be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Ge=function(e){Object(Z.a)(a,e);var t=Be(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={category:1,item:0},e.onCategory=function(t){e.setState({category:t,item:0})},e.onItemSelected=function(t){e.setState({item:t})},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.props,t=e.lan,a=e.products,n=e.facs,c=this.state,o=c.category,i=c.item,l=n.products.map(function(e){var t=a.find(function(t){return t.id===e.product});return Object.assign(e,t)}),s=l.map(function(e){return e.category}),u=l.filter(function(e){return e.category===o});return r.a.createElement("div",{className:"App-content topped padded"},r.a.createElement(Ue,{view:"hor",lan:t,products:u,category:o,item:i,facs:n}),r.a.createElement(qe,{lan:t,cats:s,category:o,onCategory:this.onCategory}),r.a.createElement(Fe,{products:u,category:o,stat:!1,itemSelected:this.onItemSelected,lan:t}))}}]),a}(r.a.Component),He=Object(s.b)(function(e){return{lan:e.settings.lan,facs:e.facs,user:e.user,products:e.products}})(Ge);function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var We=function(e){Object(Z.a)(a,e);var t=Je(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={q:0,category:1},e.onOrder=function(e){console.log(e)},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.props,t=e.lan,a=(e.city,e.products),n=e.facs,c=this.state.category,o=n.products.map(function(e){var t=a.find(function(t){return t.id===e.product});return Object.assign(e,t)}).filter(function(e){return e.category===c});return r.a.createElement("div",{className:"App-content topped padded"},r.a.createElement(Ue,{view:"ver",lan:t,open:n.open,onOrder:this.onOrder,products:o}))}}]),a}(r.a.Component);We.propType={products:F.a.array.isRequired,city:F.a.number.isRequired,facs:F.a.array.isRequired};var Ye=Object(s.b)(function(e){return{products:e.products,facs:e.facs,city:e.settings.city,lan:e.settings.lan}})(We),Ze=Object(s.b)(function(e){return{lan:e.settings.lan,isAuth:!!e.user.token}})(function(e){var t=e.isAuth,a=e.lan,n=e.component,c=Object(h.a)(e,["isAuth","lan","component"]);return console.log(t),r.a.createElement(o.b,Object.assign({},c,{render:function(e){return t?r.a.createElement(n,Object.assign({lan:a},e)):r.a.createElement(o.a,{to:"/"})}}))}),Ve=Object(s.b)(function(e){return{lan:e.settings.lan,city:e.settings.city,isAdmin:1===e.user.membership,membership:e.user.membership}})(function(e){var t=e.isAdmin,a=e.membership,n=e.city,c=e.lan,i=e.component,l=Object(h.a)(e,["isAdmin","membership","city","lan","component"]);return console.log("Log Admin as: ",a),r.a.createElement(o.b,Object.assign({},l,{render:function(e){return(t||a<128)&&n?r.a.createElement(i,Object.assign({lan:c},e)):n?r.a.createElement(o.a,{to:"/admin"}):r.a.createElement(o.a,{to:"/"})}}))}),Xe=a(540),Ke=function(e){var t,a,n,c,o=e.ordered,i=e.pickup,l=e.id,s=(e.data,e.products,e.onClick);return o&&(t=o.getHours(),a=o.getMinutes()>9?o.getMinutes():"0".concat(o.getMinutes())),i&&(n=i.getHours(),c=i.getMinutes()>9?i.getMinutes():"0".concat(i.getMinutes())),r.a.createElement(Xe.a.Row,{onClick:function(e){return s(l)}},r.a.createElement(Xe.a.Column,{width:8},l),r.a.createElement(Xe.a.Column,{width:4},o?"".concat(t,":").concat(a):"--"),r.a.createElement(Xe.a.Column,{width:4},i?"".concat(n,":").concat(c):"--"))},Qe=Object(s.b)(function(e){return{products:e.products}})(function(e){var t=e.data,a=e.products,n=t.length>1?t.map(function(e){return{p:a.find(function(t){return t.id===e.item}),q:e.quant,opt:e.options}}):{p:a.find(function(e){return e.id===t.item}),q:t.quant,opt:t.options};return n.length>1?n.map(function(e){return r.a.createElement(Xe.a.Row,{className:"detail nopadd"},r.a.createElement(Xe.a.Column,{width:8},e.p.name),r.a.createElement(Xe.a.Column,{width:4},e.q),r.a.createElement(Xe.a.Column,{width:4},r.a.createElement(M.a,{size:"small",icon:"eye"})))}):r.a.createElement(Xe.a.Row,{className:"detail nopadd"},r.a.createElement(Xe.a.Column,{width:8},n.p.name),r.a.createElement(Xe.a.Column,{width:4},n.q),r.a.createElement(Xe.a.Column,{width:4},r.a.createElement(M.a,{size:"small",icon:"eye"})))}),$e=function(e){var t=e.lan,a=e.list,c=e.data,o=(e.membership,{en:["order #","at","door","for"],es:["order #","de","domic.","para"],bg:["\u043f\u043e\u0440\u044a\u0447\u043a\u0430 #","\u043e\u0442","\u0434\u043e\u0441\u0442.","\u0437\u0430"]}[t]),i=Object(n.useState)(null),l=Object(Re.a)(i,2),s=l[0],u=l[1];return r.a.createElement(Xe.a,{celled:!0,className:"nopadd"},r.a.createElement(Xe.a.Row,null,r.a.createElement(Xe.a.Column,{width:8},o[0]),r.a.createElement(Xe.a.Column,{width:4},r.a.createElement(Ne.a,{name:"clock"})),r.a.createElement(Xe.a.Column,{width:4},r.a.createElement(Ne.a,{name:"clock outline"}))),a.map(function(e){var t=c.filter(function(t){return t.id===e}),a=t.length>1?t.map(function(e){return e.rest}):t[0].rest,n=t[0],o=n.id,i=n.ordered_at,l=n.pick_up_time;return r.a.createElement(Xe.a,{celled:!0,className:"order nopadd"},r.a.createElement(Ke,{key:o,id:o,onClick:function(e){return u(o)},ordered:i?new Date(i):null,pickup:l?new Date(l):null}),s===o&&r.a.createElement(Qe,{data:a}))}))},et=Object(s.b)(function(e){return{uid:e.user.uid,socket:e.settings.socket,order_counter:e.settings.order_counter,lan:e.settings.lan,membership:e.user.membership,fac:e.facs}},{getOrders:function(e){return function(t){return new Promise(function(t,a){y.collection(e).then(function(e){var a=e.data;t(a)}).catch(function(e){return a(e)})})}},setInterface:O})(function(e){var t=e.uid,a=e.lan,c=e.fac,o=e.membership,i=e.order_counter,l=(e.socket,e.getOrders),s=e.setInterface,u={ui:{en:["Bakery: ","Open Session","New Orders: "],es:["Panader\xeda: ","Iniciar sesi\xf3n","Nueva Orden: "],bg:["\u041f\u0435\u043a\u0430\u0440\u043d\u0430: ","\u041e\u0442\u0432\u043e\u0440\u0438 \u0421\u0435\u0441\u0438\u044f","\u041d\u043e\u0432\u0438 \u043f\u043e\u0440\u044a\u0447\u043a\u0438: "]}},m=Object(n.useState)([]),d=Object(Re.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)([]),b=Object(Re.a)(h,2),v=b[0],g=b[1];return r.a.createElement("div",{className:"init padded oval-but"},r.a.createElement(U.a,{horizontal:!0},"".concat(u.ui[a][0]).concat(c.name)),r.a.createElement($e,{data:p,list:v,member:o,lan:a}),r.a.createElement("br",null),r.a.createElement(M.a,{fluid:!0,color:"blue",content:"".concat(u.ui[a][2],": ").concat(i),onClick:function(e){c.uid===t&&l(c.id).then(function(e){var t=e.map(function(e){return e.id});f(e),g(Array.from(new Set(t))),s({order_counter:0})}).catch(function(e){return console.log(e.message)})}}))}),tt=function(e){e.member,e.lan;return r.a.createElement("div",{className:"oval-but"},r.a.createElement("p",null,"Test.Table here"))},at=a(533);function nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var rt=function(e){Object(Z.a)(a,e);var t=nt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={checkin:!1,open:!1,dlvr:!1,pod:!1,ui:{en:["SHUTDOWN","Rest","Controls:","ON","OFF","PoD","Delivery"],es:["CERRAR","Descanzo","Controles:","ON","OFF","PoD","Domicilio"],bg:["\u0417\u0410\u0422\u0412\u041e\u0420\u0418","\u041f\u043e\u0447\u0438\u0432\u043a\u0430","\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u0438:","ON","OFF","PoD","\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"]}},e.onChange=function(t,a){var n=a.name;e.setState(function(e){return Object(J.a)({},n,!e[n])});var r=e.props,c=r.setFac,o=r.socketCounter,i=r.id;switch(c({data:Object(J.a)({},n,!e.state[n]),id:i}),n){case"checkin":e.state.checkin?Se(i):Ce(o);break;case"open":je(null,JSON.stringify({fac:e.props.fac.id,open:!e.state.open}))}},e.closeShop=function(t,a){var n=a.name;e.props.setFac({id:e.props.id,data:{open:!1,checkin:!1}}),je(null,JSON.stringify({fac:e.props.fac.id,open:!1})),e.setState(function(e){return{open:!1,checkin:"close"!==n&&e.checkin}})},e.switchPod=function(){e.setState(function(e){return{pod:!e.pod}})},e.componentDidMount=function(){console.log("Baker Home: ",e.props.fac);var t=e.props.fac,a=t.checkin,n=t.open,r=t.delivery;e.setState({checkin:!!a,open:!!n,dlvr:4!==r})},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.state.ui[this.props.lan],t=this.state,a=t.open,n=t.checkin,c=t.dlvr,o=t.pod;return r.a.createElement("div",{className:"oval-but"},r.a.createElement(U.a,{horizontal:!0},e[2]),r.a.createElement(Xe.a,{columns:2},r.a.createElement(Xe.a.Row,null,r.a.createElement(Xe.a.Column,null,r.a.createElement(at.a,{name:"checkin",checked:n,disabled:a,label:r.a.createElement("label",null,n?"Check-out":"Check-in"),onChange:this.onChange,toggle:!0})),r.a.createElement(Xe.a.Column,null,r.a.createElement(at.a,{name:"open",checked:a,disabled:!n,label:r.a.createElement("label",null,a?"Close":"Open"),onChange:this.onChange,toggle:!0})))),r.a.createElement("br",null),r.a.createElement(Xe.a,null,r.a.createElement(Xe.a.Row,{columns:2},r.a.createElement(Xe.a.Column,null,r.a.createElement(M.a,{fluid:!0,color:"blue",icon:"motorcycle",disabled:!n||4===this.props.fac.delivery,content:c?"".concat(e[6],": ").concat(e[4]):"".concat(e[6],": ").concat(e[3]),onClick:this.closeShop})),r.a.createElement(Xe.a.Column,null,r.a.createElement(M.a,{fluid:!0,color:"grey",icon:"sign-out",disabled:!0,content:o?"".concat(e[5],": ").concat(e[4]):"".concat(e[5],": ").concat(e[3]),onClick:this.switchPod})))),r.a.createElement("br",null),r.a.createElement(M.a,{fluid:!0,color:"grey",name:"pause",icon:"pause",content:e[1],disabled:!0,onClick:this.closeShop}),r.a.createElement("br",null),r.a.createElement(M.a,{fluid:!0,color:"red",name:"close",icon:"attention",disabled:!a||!n,content:e[0],onClick:this.closeShop}))}}]),a}(r.a.Component),ct=Object(s.b)(function(e){return{lan:e.settings.lan,fac:e.facs}},{socketCounter:R,setFac:function(e){return function(t){return g.setupFac(e).then(function(){var a=e.data;t(C(a))})}}})(rt),ot=Object(s.b)(function(e){return{customers:e.settings.customer_counter,orders:e.settings.order_counter,fac:e.facs.id}})(function(e){var t=e.member,a=e.fac,n=e.lan,c=e.customers,o=e.orders,i={en:["Boss","Lab","Fac","Baker","Courier","Tester"],es:["Boss","Lab","Fac","Baker","Courier","Tester"],bg:["Boss","Lab","Fac","Baker","Courier","Tester"]}[n],l=Math.log2(t);return r.a.createElement("div",null,r.a.createElement(U.a,{horizontal:!0},i[l]," Dashboard"),r.a.createElement(Xe.a,{className:"nopadd"},r.a.createElement(Xe.a.Row,{columns:2},r.a.createElement(Xe.a.Column,null,r.a.createElement(Ne.a,{name:"user"})),r.a.createElement(Xe.a.Column,null,r.a.createElement(Ne.a,{name:"clipboard list"}))),r.a.createElement(Xe.a.Row,{columns:2},r.a.createElement(Xe.a.Column,null,r.a.createElement("div",{className:"circle-div"},r.a.createElement("h2",null,c.filter(function(e){return e===a}).length||0))),r.a.createElement(Xe.a.Column,null,r.a.createElement("div",{className:"circle-div"},r.a.createElement("h2",null,o||64))))))}),it=function(){return r.a.createElement("div",{className:"oval-but"},r.a.createElement(U.a,{horizontal:!0},"Tester Demo"),r.a.createElement("p",null,"As a potential partner you can find your-self as a LAB-owner (BOSS), a FAC-owner (Baker) or Delivery-courier.",r.a.createElement("br",null),"Choose a Role to test:"),r.a.createElement(M.a,{fluid:!0,color:"black",content:"Role: BOSS"}),r.a.createElement("br",null),r.a.createElement(M.a,{fluid:!0,color:"orange",content:"Role: Baker"}),r.a.createElement("br",null),r.a.createElement(M.a,{fluid:!0,color:"grey",content:"Role: Courier"}),r.a.createElement("br",null),r.a.createElement(U.a,{horizontal:!0}," --- "),r.a.createElement("p",null,"To learn more about business Partner-options:"),r.a.createElement(M.a,{color:"blue",content:"Business Plans"}))},lt=Object(s.b)(null,{setInterface:O,userSignedIn:D})(function(e){var t,a=e.lan,n=e.member,c=(e.id,e.fowner),o=e.baker,i=e.uid,l=e.setInterface,s=e.userSignedIn,u={en:["Unauthorized User!","Not your ","Please, change ","Zone/City","Bakery","LAB","FAC"],es:["Usuario no otorizado!","No es tu ","Porfavor, cambie ","Zone/City","Bakery","LAB","FAC"],bg:["\u041d\u0435\u0443\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u0430\u043d \u0434\u043e\u0441\u0442\u044a\u043f!","\u041d\u0435 \u0441\u0438 \u0432 \u0442\u0432\u043e\u044f\u0442\u0430 ","\u0421\u043c\u0435\u043d\u0438 ","\u0417\u043e\u043d\u0430/\u0413\u0440\u0430\u0434","\u041f\u0435\u043a\u0430\u0440\u043d\u0430","\u041b\u0410\u0411","\u0424\u0410\u041a"]};switch(n){case 1:t=1===i;break;case 4:t=c===i;break;case 8:case 12:t=o===i;break;default:t=!0}return r.a.createElement("div",{className:"init top-15 padded oval-but"},8===n&&r.a.createElement(ct,e),64===n&&r.a.createElement(it,e),r.a.createElement(ot,e),r.a.createElement(oe.a,{header:"".concat(u[a][0]),content:8===n?"".concat(u[a][1]," ").concat(u[a][4],". ").concat(u[a][2]," ").concat(u[a][4]):"".concat(u[a][1]," ").concat(u[a][3],". ").concat(u[a][2]," ").concat(u[a][3]),open:!t,onCancel:function(e){localStorage.clear(),A(),s({}),Se(),l({socket:!1})},onConfirm:function(e){return l({city:null})}}))}),st=Object(s.b)(function(e){return{uid:e.user.uid,membership:e.user.membership,fac:e.facs}},{userSignedIn:D,setInterface:O})(function(e){var t=e.uid,a=e.lan,n=e.membership,i=e.userSignedIn,l=e.setInterface,s=(e.dispatch,Object(h.a)(e,["uid","lan","membership","userSignedIn","setInterface","dispatch"])),u={ui:{en:["Bakery: ","Open Session","boss","lab","fac","baker","delivery","tester","logout"],es:["Panader\xeda: ","Iniciar sesi\xf3n","boss","lab","fac","baker","delivery","tester","logout"],bg:["\u041f\u0435\u043a\u0430\u0440\u043d\u0430: ","\u041e\u0442\u0432\u043e\u0440\u0438 \u0421\u0435\u0441\u0438\u044f","boss","lab","fac","baker","delivery","tester","logout"]}},m=s.match.url;return r.a.createElement("div",{className:"App-content topped padded"},r.a.createElement("div",{className:"menu-bar dobletopped"},r.a.createElement(M.a.Group,{color:"grey"},r.a.createElement(M.a,{name:"home",as:c.b,to:m,icon:"home"}),1===n&&r.a.createElement(M.a,{name:u.ui[a][2],as:c.b,to:"".concat(m,"/").concat(u.ui[a][2]),content:u.ui[a][3]}),2===n&&r.a.createElement(M.a,{name:u.ui[a][3],as:c.b,to:"".concat(m,"/").concat(u.ui[a][3]),content:u.ui[a][3]}),4===n&&r.a.createElement(M.a,{name:u.ui[a][4],as:c.b,to:"".concat(m,"/").concat(u.ui[a][4]),content:u.ui[a][4]}),8===n&&r.a.createElement(M.a,{name:u.ui[a][5],as:c.b,to:"".concat(m,"/").concat(u.ui[a][5]),content:u.ui[a][5],onClick:function(e){if(!s.fac.open)return e.preventDefault()}}),32===n&&r.a.createElement(M.a,{name:u.ui[a][6],as:c.b,to:"".concat(m,"/").concat(u.ui[a][6]),content:u.ui[a][6]}),64===n&&r.a.createElement(M.a,{name:u.ui[a][7],as:c.b,to:"".concat(m,"/").concat(u.ui[a][7]),icon:"eye",content:u.ui[a][7]}),r.a.createElement(M.a,{name:u.ui[a][8],as:c.b,to:m,icon:"stop circle outline",color:"blue",content:u.ui[a][8],onClick:function(e){return localStorage.clear(),A(),i({}),Se(),void l({socket:!1})}}))),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:s.match.url,exact:!0,render:function(){return r.a.createElement(lt,{lan:a,id:s.fac.id,fowner:s.fac.uid,baker:s.fac.baker,uid:t,member:n})}}),r.a.createElement(o.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][2]),component:lt}),r.a.createElement(o.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][3]),component:lt}),r.a.createElement(o.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][4]),component:lt}),r.a.createElement(o.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][5]),component:et}),r.a.createElement(o.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][6]),component:lt}),r.a.createElement(o.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][7]),render:function(){return r.a.createElement(tt,{lan:a,member:n})}})))});function ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var mt=function(e){Object(Z.a)(a,e);var t=ut(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{es:["Su Pedido","No haz jugado hoy!","No haz comido hoy!","Coma mas..."],en:["Repeat this:","You've played 0 Games today!","You haven't eaten today!","Start now..."],bg:["\u041f\u043e\u0432\u0442\u043e\u0440\u0438: ","\u041d\u0435 \u0441\u0438 \u0438\u0433\u0440\u0430\u043b \u0434\u043d\u0435\u0441!","\u041d\u0435 \u0441\u0438 \u044f\u043b \u0434\u043d\u0435\u0441!","\u0417\u0430\u043f\u043e\u0447\u043d\u0438 \u0441\u0435\u0433\u0430..."]}},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.props.lan,t=this.state.ui[e];return r.a.createElement("div",{className:"App-content central padded"},r.a.createElement("div",{className:"margined full-width"},r.a.createElement(U.a,{horizontal:!0},t[0]),r.a.createElement(ee.a,{negative:!0},r.a.createElement(ee.a.Header,null,t[2]),r.a.createElement("p",null,t[3]))))}}]),a}(r.a.Component),dt=function(e){var t=e.lan,a=(e.pass,e.login);return r.a.createElement("div",{className:"App-content padded Admin-Page"},r.a.createElement(ae,{submit:a,lan:t,pass:!0}))};function pt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var ft=function(e){Object(Z.a)(a,e);var t=pt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{es:["Su Pedido","Por ahora no hay juegos","Vuelva pronto..."],en:["Play Home","No Games to play yet","Come back soon..."],bg:["\u0418\u0433\u0440\u0438","\u041d\u044f\u043c\u0430 \u0438\u0433\u0440\u0438 \u0437\u0430 \u0441\u0435\u0433\u0430","\u041f\u0440\u043e\u0432\u0435\u0440\u0438 \u043e\u0442\u043d\u043e\u0432\u043e \u0441\u043a\u043e\u0440\u043e..."]}},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.props.lan,t=this.state.ui[e];return r.a.createElement("div",{className:"App-content central padded"},r.a.createElement("div",{className:"margined full-width"},r.a.createElement(U.a,{horizontal:!0},t[0]),r.a.createElement(ee.a,{negative:!0},r.a.createElement(ee.a.Header,null,t[1]),r.a.createElement("p",null,t[2]))))}}]),a}(r.a.Component),ht=function(e){var t=e.ind,a=e.prime,n=(e.lan,e.view),o=e.row,i=e.stat,l=e.edit,s=e.locClick,u=e.current;console.log("ULocation row: ",u,o.location,o.prime);var m=o.prime?" selected-row":"";return r.a.createElement("div",{className:"ui grid item"+m},r.a.createElement("div",{className:"two wide column nopad items"},!i&&a?r.a.createElement(Ne.a,{name:"pin"}):"",i&&"select"===n&&r.a.createElement(at.a,{checked:u===o.location||!!o.prime&&0===u,onChange:function(){return s(o.location)}})),r.a.createElement("div",{className:"eight wide column nopad"},o.street),r.a.createElement("div",{className:"two wide column nopad"},o.number||o.location),r.a.createElement("div",{className:"two wide column nopad"},!i&&r.a.createElement("span",{basic:!0,onClick:null},r.a.createElement(Ne.a,{color:"red",name:"minus circle"}))),r.a.createElement("div",{className:"two wide column nopad"},l&&r.a.createElement(c.b,{to:"/user/location/"+t},r.a.createElement(Ne.a,{color:"blue",name:"pencil"}))))},bt=function(e){var t=e.stat,a=e.view,n=e.lan,o=e.list,i=e.city,l=e.onLocation,s=e.current,u=e.disabled,m=e.fac,d={en:["No Locations","Address","\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!"],es:["No tienes Direcci\xf3n","Direcci\xf3n","\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!"],bg:["\u041d\u044f\u043c\u0430\u0448 \u0410\u0434\u0440\u0435\u0441!","\u0410\u0434\u0440\u0435\u0441","\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!"],error:{en:["No Delivery Service!","Your Location has no Delivery Service! Take your pedido from: "],es:["Sin Domcilio!","Esta localidad no tiene servicio a Domicilio. Recibe su pedido a la direcci\xf3n: "],bg:["\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!","\u0422\u043e\u0437\u0438 \u0440\u0430\u0439\u043e\u043d \u0435 \u0431\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438. \u0412\u0437\u0435\u043c\u0438 \u0441\u0432\u043e\u044f\u0442\u0430 \u043f\u043e\u0440\u044a\u0447\u043a\u0430 \u043e\u0442 \u0430\u0434\u0440\u0435\u0441: "]}};return r.a.createElement("div",{className:o&&0!==o.length?"order-list":"order-list empty"},u&&r.a.createElement(ee.a,{negative:!0},r.a.createElement(ee.a.Header,null,d.error[n][0]),r.a.createElement("p",null,d.error[n][1]),r.a.createElement("b",null,"'".concat(m.street,"', ").concat(m.number))),u||o&&0!==o.length?r.a.createElement("div",null,o.forEach(function(e,c){if(e.city===i)return r.a.createElement(ht,{key:c,ind:c,prime:e.prime,current:s,locClick:l,lan:n,row:e,view:a,edit:!0,stat:t})})):r.a.createElement("div",null,r.a.createElement("div",null,d[n][0]),r.a.createElement("br",null),r.a.createElement("div",{className:"oval-but"},r.a.createElement(M.a,{as:c.b,to:"../user/locations",color:"red",icon:"warning sign",content:d[n][1]}))))};function vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var gt=function(e){Object(Z.a)(a,e);var t=vt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["Order","Where to:","Order:","Cancel","Add","You must give us a location!","Oreder recieved","Tu Pick up","Or","Success","Error","CLOSED","Pick up in: ","min."],es:["Orden","Para donde:","Pedir","Cancelar","M\xe1s","Necesitamos direcci\xf3n de entrega!","Pedido recibido","Para recojer","O","Exitoso","Error","CERRADO","Recoger en: ","min."],bg:["\u041f\u043e\u0440\u044a\u0447\u043a\u0430","\u0417\u0430 \u043a\u044a\u0434\u0435:","\u041f\u043e\u0440\u044a\u0447\u0430\u0439","\u041e\u0442\u043a\u0430\u0436\u0438","\u041e\u0449\u0435","\u0422\u0440\u044f\u0431\u0432\u0430 \u043d\u0438 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!","\u041f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430 \u0435 \u043f\u0440\u0438\u0435\u0442\u0430","\u0417\u0430 \u0412\u0437\u0435\u043c\u0430\u043d\u0435","\u0418\u043b\u0438","\u0427\u0435\u0441\u0442\u0438\u0442\u043e!","!\u0413\u0440\u0435\u0448\u043a\u0430!","\u0417\u0410\u0422\u0412\u041e\u0420\u0415\u041d\u041e","\u0412\u0437\u0435\u043c\u0438 \u0441\u043b\u0435\u0434: ","\u043c\u0438\u043d."]},currentLocation:0,delivery:1,message:{}},e.onLocationSlected=function(t){console.log(t),e.setState({currentLocation:t,message:{}})},e.onOrder=function(t){var a,n=0,r=e.props,c=r.user,o=r.cart,i=r.lan,l=r.fac,s=e.state,u=s.currentLocation,m=s.delivery,d=o.map(function(e){return(parseFloat(e.price)*parseFloat(e.quant)).toFixed(2)}).reduce(function(e,t){return(parseFloat(e)+parseFloat(t)).toFixed(2)});if(m){if(c.locations.forEach(function(e){e.prime&&0!==e.prime&&(n=e.id,console.log("Deliver ",n))}),!n&&!u)return void e.setState({message:{stat:e.state.ui[i][5]}});a=0!==u?u:n,e.props.makeCart({user_location:a,cart:o,delivery:m,fac_id:l.id,total:d}).then(function(t){e.setState({message:{stat:t}}),je(null,JSON.stringify({user:c.uid,mem:c.membership,fac:l.id,ordered:!0}))}).catch(function(t){return e.setState({message:{err:t}})})}else e.props.makeCart({user_location:null,cart:o,delivery:m,fac_id:l.id,total:d}).then(function(t){e.setState({message:{stat:t}}),je(null,JSON.stringify({user:c.uid,mem:c.membership,fac:l.id,ordered:!0}))}).catch(function(t){return e.setState({message:{err:t}})})},e}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.user.locations,t=this.props,a=t.fac,n=t.getLocationData;4===a.delivery&&this.setState({delivery:0}),e&&0!==e.length&&e.forEach(function(e,t){n(e.location,t)})}},{key:"render",value:function(){var e=0,t=this.props,a=t.user,n=t.cart,o=t.lan,i=t.city,l=t.fac,s=this.state,u=s.currentLocation,m=s.message,d=s.delivery,p=this.state.ui[o];a.locations&&a.locations.forEach(function(e){e.prime});var f=n.map(function(e){return(parseFloat(e.price)*parseFloat(e.quant)).toFixed(2)});return f.length>0&&(e=f.reduce(function(e,t){return(parseFloat(e)+parseFloat(t)).toFixed(2)})),console.log(f,n),r.a.createElement("div",{className:"App-content topped padded"},r.a.createElement(U.a,{horizontal:!0},p[1]),a.locations||4===l.delivery?r.a.createElement(bt,{view:"select",stat:!0,disabled:4===l.delivery,current:u,onLocation:this.onLocationSlected,list:a.locations?a.locations.filter(function(e){return e.city===i}):[],city:i,lan:o,fac:l}):r.a.createElement("div",null,r.a.createElement(M.a,{as:c.b,to:"../user/locations",color:"red",icon:"warning sign",content:p[1]})),Object.keys(m).length>0&&!!d&&r.a.createElement(ee.a,{negative:!0,content:m.stat}),4!==l.delivery&&r.a.createElement(U.a,{horizontal:!0},p[8]),4!==l.delivery&&r.a.createElement("div",{className:"oval-but"},r.a.createElement(M.a,{fluid:!0,content:p[7],icon:"hand paper",color:"blue"})),r.a.createElement(U.a,{horizontal:!0},p[0]),Object.keys(m).length>0?r.a.createElement(ee.a,{positive:m.stat,negative:m.error},r.a.createElement(ee.a.Header,null,m.stat?p[9]:p[10]),r.a.createElement("p",null,m.stat?m.stat:m.err),m.stat&&r.a.createElement("p",null,"".concat(p[12]).concat(l.order_estimated).concat(p[13]))):r.a.createElement(ze,{stat:!0,cart:n,lan:o}),r.a.createElement(U.a,{horizontal:!0},"\u25cb"),r.a.createElement("div",{className:"menu-bar"},r.a.createElement(M.a.Group,null,r.a.createElement(M.a,{color:"grey",onClick:this.props.cancelCart,as:c.b,to:"/",content:p[3]}),r.a.createElement(M.a,{name:"submit",disabled:0===e||!a.locations&&4!==l.delivery||!l.open,color:"orange",onClick:this.onOrder,content:p[2].concat(" ",e.toString())}),r.a.createElement(M.a,{color:"grey",as:c.b,to:"/order",icon:"plus",content:p[4]}))),!l.open&&r.a.createElement("div",{className:"fac-lable"},r.a.createElement("div",{className:"fac-closed"},r.a.createElement("h3",null,p[11]))))}}]),a}(r.a.Component);gt.propType={lan:F.a.string.isRequired,user:F.a.shape({uid:F.a.number.isRequired}),cart:F.a.array.isRequired,city:F.a.number.isRequired};var Et=Object(s.b)(function(e){return{lan:e.settings.lan,user:e.user,fac:e.facs,cart:e.cart,city:e.settings.city}},{getLocationData:z,cancelCart:ge,makeCart:function(e){return function(t){return new Promise(function(a,n){y.pushOrder(e).then(function(e){t({type:"CART_CLEAR"}),a(e.message)}).catch(function(e){n(e.response.statusText)})})}}})(gt),yt=Object(s.b)(null,{addCart:ve})(function(e){var t=e.lan,a=e.has_perks,n=(e.new_user,e.perks,e.addCart),c={ui:{bg:["\u0418\u043c\u0430\u0448","\u041d\u044f\u043c\u0430\u0448","\u0431\u043e\u043d\u0443\u0441\u0438!...",'1 "\u041c\u0430\u0440\u0433\u0430\u0440\u0438\u0442\u0430" \u0413\u0440\u0430\u0442\u0438\u0441!',"\u041c\u0430\u0440\u0433\u0435\u0440\u0438\u0442\u0430"],en:["You have","You have No","perks!...",'Free "Margherita"!',"Margherita"],es:["Tienes","No tienes","obsequios!",'"Margherita" Gratis!',"Margherita"]}};return r.a.createElement("div",null,a?r.a.createElement("div",{className:"oval-but"},r.a.createElement(M.a,{color:"orange",content:c.ui[t][3],onClick:function(){return n([{product:1,quant:1,name:c.ui[t][4],price:0,promo:1}])}})):"".concat(c.ui[t][1]," ").concat(c.ui[t][2]))});function Ot(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Ct=function(e){Object(Z.a)(a,e);var t=Ot(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["Your Locations:","New","Edit","Dashboard:","Your Perks:"],es:["Tus direciones:","Nueva","Editar","Controles:","Tus obsequios:"],bg:["\u0422\u0432\u043e\u0438\u0442\u0435 \u0410\u0434\u0440\u0435\u0441\u0438:","\u0410\u0434\u0440\u0435\u0441","\u041f\u0440\u043e\u043c\u0435\u043d\u0438","\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u0438:","\u0422\u0432\u043e\u0438\u0442\u0435 \u043d\u0430\u0433\u0440\u0430\u0434\u0438:"]}},e.getLocData=function(t){t.forEach(function(t,a){e.props.getLocationData(t.location,a)})},e.logout=function(){var t=e.props,a=t.cancelCart,n=t.userSignedIn,r=t.setInterface;console.log("Logout this User"),localStorage.clear(),A(),a(),Se(),r({socket:!1,city:null}),n({})},e}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.locations;e&&0!==e.length&&this.getLocData(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;t&&(e.locations&&e.locations.length===t.length||this.getLocData(t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.lan,n=t.user,o=t.city,i=t.fac,l=this.state.ui[a],s=n.locations?n.locations.filter(function(e){return e.city===o}):[];return r.a.createElement("div",{className:"App-content topped padded oval-but"},r.a.createElement(U.a,{horizontal:!0},l[0]),r.a.createElement(bt,{disabled:4===i.delivery,view:"list",stat:!1,fac:i,list:s,lan:a}),(4!==i.delivery||0!==s.length)&&r.a.createElement(U.a,{horizontal:!0},"\u25cb"),(4!==i.delivery||0!==s.length)&&r.a.createElement("div",{className:"row centered menu-bar"},r.a.createElement(M.a.Group,{color:"grey",widths:"2"},r.a.createElement(M.a,{as:c.b,to:"/",icon:"home"}),r.a.createElement(M.a,{disabled:4===i.delivery,as:c.b,to:"/user/locations",icon:"plus",content:l[1]}))),r.a.createElement(U.a,{horizontal:!0},l[3]),r.a.createElement(U.a,{horizontal:!0},l[4]),r.a.createElement(yt,{lan:a,has_perks:n.orders%5===0}),r.a.createElement(U.a,{horizontal:!0}),r.a.createElement(M.a,{fluid:!0,color:"red",content:"LOGOUT",as:c.b,to:"/",onClick:function(t){e.logout()}}))}}]),a}(r.a.Component);Ct.propType={lan:F.a.number.isRequired,city:F.a.number.isRequired,facs:F.a.shape({delivery:F.a.number.isRequired}).isRequired,user:F.a.shape({locations:F.a.array.isRequired,free_pizza:F.a.bool.isRequired}).isRequired};var jt=Object(s.b)(function(e){return{city:e.settings.city,fac:e.facs,user:e.user}},{getLocationData:z,userSignedIn:D,setInterface:O,cancelCart:ge})(Ct);function St(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var kt=function(e){Object(Z.a)(a,e);var t=St(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,data:{},value:null},e.resetComponent=function(){return e.setState({isLoading:!1,results:[],value:""})},e.handleResultSelect=function(t,a){var n=a.result,r=a.name,c=n.title,o=n.id,i=e.props,l=i.getInput,s=i.getNumbers,u=i.onNewData;"street"===r&&s("location",o),e.setState(Object(d.a)({},e.state,{value:c,data:Object(d.a)({},e.state.data,Object(J.a)({},r,o))})),"location"===r&&u(Object(J.a)({},r,o)),l(c,r)},e.handleSearchChange=function(t,a){var n=a.value,r=a.name;e.setState({isLoading:!0,value:n});var c=e.props,o=c.list,i=c.getInput;setTimeout(function(){if(e.state.value.toString().length<1)return e.resetComponent();var t=new RegExp(le.a.escapeRegExp(e.state.value),"i");e.setState({isLoading:!1,results:le.a.filter(o,function(e){return t.test(e.title.toString())})})},300),i(n,r)},e}return Object(Y.a)(a,[{key:"componentWillMount",value:function(){this.resetComponent()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results,c=this.props.name;return r.a.createElement("div",null,r.a.createElement("div",{className:"street"===c?"full-width":"short"},r.a.createElement(se.a,Object.assign({name:c,loading:t,onResultSelect:this.handleResultSelect,onSearchChange:le.a.debounce(this.handleSearchChange,500,{leading:!0}),results:n,value:a},this.props))))}}]),a}(r.a.Component);function wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Rt=function(e){Object(Z.a)(a,e);var t=wt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{},ui:{en:["number"],es:["numero"],bg:["\u043d\u043e\u043c\u0435\u0440"]}},e.onChange=function(t,a){var n=a.name,r=a.value;a.key;e.setState({data:Object(d.a)({},e.state.data,Object(J.a)({},n,Number(r)))});var c=e.props.list;e.props.onNewData(Object(J.a)({},n,Number(r)));var o=c.findIndex(function(e){return e.id===r});e.props.getInput(c[o].title,n)},e}return Object(Y.a)(a,[{key:"render",value:function(){var e,t=this.state.ui,a=this.props,n=a.name,c=a.list;return c&&(e=c.map(function(e,t){return{key:t+1,value:e.id,text:e.title}})),r.a.createElement("div",{className:"short"},r.a.createElement($.a.Select,{onChange:this.onChange,name:n,placeholder:t[0],options:e,value:this.state.data[n]||""}))}}]),a}(r.a.Component);function Nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var At=function(e){Object(Z.a)(a,e);var t=Nt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["floor","door","entry","bell","mobile","myHome, theOffice,...","Name it like:","Primary"],es:["piso","puerta","entrada","timbre","mobile","miCasa, LaOficina,...","Ponle nombre:","Principal"],bg:["\u0435\u0442\u0430\u0436","\u0432\u0440\u0430\u0442\u0430","\u0432\u0445\u043e\u0434","\u0437\u0432\u044a\u043d\u0435\u0446","\u043c\u043e\u0431\u0438\u043b\u0435\u043d","\u0443\u041d\u0430\u0441, \u043e\u0444\u0438\u0441\u0430, \u043f\u0440\u0438\u041c\u0430\u043c\u0430,...","\u0418\u043c\u0435\u043d\u0443\u0432\u0430\u0439 \u0410\u0434\u0440\u0435\u0441\u0430:","\u041e\u0441\u043d\u043e\u0432\u0435\u043d"]},valid:!0,empty:!0,data:{}},e.onChange=function(t,a){var n=a.name,r=a.value,c=e.props,o=c.edit,i=c.onInput,l=c.addData,s="floor"===n?Number(r):r;e.setState({data:Object(d.a)({},e.state.data,Object(J.a)({},n,s))}),o?i(n,s):l(Object(J.a)({},n,s))},e.onCheckBox=function(t,a){var n=a.name,r=e.state.data;e.props.onInput(n,r[n]?Number(!r[n]):1),e.setState({data:Object(d.a)({},r,Object(J.a)({},n,!r[n]||!r[n]))})},e.onClear=function(t){t.preventDefault(),e.setState({data:{}})},e}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){this.props.edit&&this.setState({data:Object(d.a)({},this.state.data,{prime:this.props.loc.prime})})}},{key:"render",value:function(){var e=this.props,t=e.lan,a=e.edit,n=e.loc,c=this.state.ui[t],o=this.state,i=o.valid,l=o.data;return r.a.createElement($.a,null,r.a.createElement($.a.Group,null,r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"eight wide column rect"},r.a.createElement($.a.Input,{onChange:this.onChange,required:!0,name:"bell",placeholder:a&&n.bell?c[3].concat(": ",n.bell):c[3],value:l.bell||""})),r.a.createElement("div",{className:"seven wide column rect"},r.a.createElement($.a.Input,{onChange:this.onChange,required:!0,name:"mobile",placeholder:a&&n.mobile?n.mobile:c[4],value:l.mobile||""}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"four wide column rect"},r.a.createElement($.a.Input,{onChange:this.onChange,required:!0,name:"floor",placeholder:a&&n.floor?n.floor.toString().concat(" ",c[0]):c[0],value:l.floor||""})),r.a.createElement("div",{className:"four wide column rect"},r.a.createElement($.a.Input,{onChange:this.onChange,required:!0,name:"door",placeholder:a&&n.door?n.door.toString().concat(" ",c[1]):c[1],value:l.door||""})),r.a.createElement("div",{className:"four wide column rect"},r.a.createElement($.a.Input,{onChange:this.onChange,name:"entry",placeholder:a&&n.entry?n.entry.toString().concat(" ",c[2]):c[2],value:l.entry||""})),!a&&r.a.createElement("div",{className:"tree wide column"},r.a.createElement(M.a,{className:"add-but",icon:"ban",onClick:this.onClear}))),a&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"eight wide column rect"},r.a.createElement($.a.Input,{onChange:this.onChange,label:c[6],name:"name",placeholder:n.name?n.name:c[5],value:l.name||""})),r.a.createElement("div",{className:"seven wide column rect"},r.a.createElement(at.a,{label:c[7],name:"prime",checked:l.prime||n.prime,onClick:this.onCheckBox})))),!i&&r.a.createElement("div",{className:"margined full-width"},r.a.createElement(ee.a,{negative:!0},r.a.createElement(ee.a.Header,null,c[3]),r.a.createElement("p",null,1)))))}}]),a}(r.a.Component),Dt=a(534);function Lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var It=function(e){Object(Z.a)(a,e);var t=Lt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["8 string reference...","Reference:"],es:["8 signos...","Referencia:"],bg:["8 \u0437\u043d\u0430\u043a\u0430 \u043a\u043e\u0434...","\u0420\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f:"]},uid:""},e.onChange=function(t){e.setState({uid:t.target.value})},e.onClick=function(){""!==e.state.uid&&e.props.onRef(e.state.uid)},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.state.ui[this.props.lan];return r.a.createElement(Dt.a,{action:{color:"teal",labelPosition:"left",icon:"key",content:"".concat(e[1]),onClick:this.onClick},name:"uid",onChange:this.onChange,actionPosition:"left",placeholder:e[0]})}}]),a}(r.a.Component);function Pt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var xt=function(e){Object(Z.a)(a,e);var t=Pt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["Delivery Location","Your Street in, ","Your Number:","Save","No service on that location","We've got you! Just open the... which door:","Have a reference..?","No ref","No such reference"],es:["Direccion de entrega","Calle-\u043e-Carrera en, ","Tu Numero:","Guardar","No hay servicio en esta direccion","Lo ubicamos! Solo abrenos la... que puerta:","Tienes referencia..?","No tengo","No such reference"],bg:["\u0410\u0434\u0440\u0435\u0441 \u0437\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430","\u0422\u0432\u043e\u044f\u0442\u0430 \u0443\u043b\u0438\u0446\u0430 \u0432\u044a\u0432, ","\u041d\u043e\u043c\u0435\u0440:","\u0417\u0430\u043f\u0430\u0437\u0438","\u041d\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0432\u0430\u043c\u0435 \u0442\u043e\u0437\u0438 \u0430\u0434\u0440\u0435\u0441","\u0422\u0443\u043a \u0441\u043c\u0435! \u0421\u0430\u043c\u043e \u043e\u0442\u0432\u043e\u0440\u0438 \u0432\u0440\u0430\u0442\u0430\u0442\u0430... \u043a\u043e\u044f \u0432\u0440\u0430\u0442\u0430? :","\u0418\u043c\u0430\u0448 \u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f..?","\u041d\u044f\u043c\u0430\u043c","\u041d\u044f\u043c\u0430 \u0442\u0430\u043a\u0430\u0432\u0430 \u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f"]},data:{},input:{},errors:{},message:!1,location:!1,locate:!1,loc_id:"",rep:!0},e.addData=function(t){console.log("Add in Locations: ",t),e.setState(Object(d.a)({},e.state,{data:Object(d.a)({},e.state.data,t)}))},e.getInput=function(t,a){e.setState({input:Object(d.a)({},e.state.input,Object(J.a)({},a,t))});var n=a.concat("s"),r=le.a.filter(e.props[n],function(e){return"street"===a?e.title===t:Number(e.title)===t});"location"!==a&&0===r.length?e.setState(Object(J.a)({errors:Object(J.a)({},a,a)},a,!1)):e.setState(Object(J.a)({errors:le.a.omit(e.state.errors,[a])},a,!0))},e.checkReference=function(t){e.props.checkReference(t).then(function(t){t.error?e.setState({message:!0,errors:t.error}):(console.log(t),e.setState({input:Object(d.a)({},e.state.input,t),data:Object(d.a)({},e.state.data,{location:t.id,ref:1}),loc_id:t.id,message:!1,errors:""}))}).catch(function(e){})},e.noRef=function(t){e.setState({rep:!1,loc_id:"",message:!1,errors:""})},e.onSubmit=function(t){!e.state.locate||e.state.rep?(t.preventDefault(),e.saveLocation()):e.submitLocation()},e.saveLocation=function(){if(0===Object.keys(e.state.errors).length){var t=e.state;t.rep,t.loc_id,t.data;e.setState({rep:!1,locate:!0,errors:{},message:!1})}else e.setState({message:!0,errors:4})},e.submitLocation=function(){e.props.userAddLocation(e.state.data)},e}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){this.props.city&&this.props.getLocations("street",this.props.city)}},{key:"render",value:function(){var e=this.props,t=e.streets,a=e.lan,n=e.city,o=e.cities,i=e.locations,l=this.state.ui[a],s=this.state,u=s.street,m=s.location,d=s.locate,p=s.message,f=s.input,h=s.rep,b=s.loc_id,v="";return o&&o.forEach(function(e){e.id===n&&(v=e.title)}),r.a.createElement("div",{className:"App-content topped padded"},r.a.createElement(U.a,{horizontal:!0},l[0]),d?r.a.createElement(ht,{onClick:N,row:f,stat:!0,lan:a}):r.a.createElement("p",{className:void 0===u||u?"left":"left warent"},h?l[6]:l[1]+v+":"),h&&r.a.createElement(It,{lan:a,onRef:this.checkReference}),!d&&!h&&r.a.createElement(kt,{lan:a,name:"street",getInput:this.getInput,onNewData:this.addData,list:t,getNumbers:this.props.getLocations}),i&&i.length>0&&u&&!d&&!h&&r.a.createElement("p",{className:void 0===m||m?"left short":"left short warent"},l[2],r.a.createElement(Rt,{name:"location",getInput:this.getInput,onNewData:this.addData,list:i})),d&&r.a.createElement("div",{className:"custom-form"},r.a.createElement(U.a,{horizontal:!0}),r.a.createElement("p",{className:"vintage left"},l[5]),r.a.createElement(At,{lan:a,addData:this.addData})),r.a.createElement(U.a,{horizontal:!0}),p&&r.a.createElement(ee.a,{positive:this.state.errors<3,negative:this.state.errors>2,content:l[this.state.errors]}),r.a.createElement("div",{className:"column sixteen wide oval-but extra-padded"},h&&r.a.createElement("div",{className:"row centered menu-bar"},r.a.createElement(M.a.Group,{widths:"2"},r.a.createElement(M.a,{color:"grey",disabled:!b||""===b,icon:"thumbs up",content:"OK",onClick:this.onSubmit}),r.a.createElement(M.a,{disabled:b||""!==b,icon:"exclamation circle",color:"blue",content:l[7],onClick:this.noRef}))),!h&&r.a.createElement("div",{className:"row centered menu-bar"},r.a.createElement(M.a.Group,{widths:"2"},r.a.createElement(M.a,{color:"grey",content:"Clear"}),r.a.createElement(M.a,{as:c.b,to:"/user",disabled:!m,basic:!m,color:"black",content:l[3],onClick:this.onSubmit})))))}}]),a}(r.a.Component);xt.propType={lan:F.a.string.isRequired,city:F.a.number.isRequired};var zt=Object(s.b)(function(e){return{city:e.settings.city,street:e.settings.street,cities:e.settings.cities,streets:e.settings.streets,locations:e.user.locations,lan:e.settings.lan}},{getLocations:k,addUserLocation:I,userAddLocation:function(e){return function(t){E.addLocation(e).then(function(a){e.id=a,t(I(e))})}},checkReference:N})(xt);function _t(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Tt=function(e){Object(Z.a)(a,e);var t=_t(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ui:{en:["Edit this Location:","Save","Cancel","Reset"],es:["Editar Direccion:","Guardar","Cancelar","Omitir"],bg:["\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u0410\u0434\u0440\u0435\u0441:","\u0417\u0430\u043f\u0430\u0437\u0438","\u041d\u0430\u0437\u0430\u0434","\u041e\u0442\u043a\u0430\u0436\u0438"]},input:{}},e.onInput=function(t,a){console.log(t,a),e.setState({input:Object(d.a)({},e.state.input,Object(J.a)({},t,a))})},e.onSubmit=function(t){var a=e.props,n=a.locations,r=a.match,c=Number(n[r.params.id].id);t.preventDefault(),e.props.userUpdateLocation(r.params.id,c,e.state.input)},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.state.ui[this.props.lan];return r.a.createElement("div",{className:"App-content topped padded"},r.a.createElement(U.a,{horizontal:!0},e[0]),r.a.createElement("div",{className:"custom-form"},r.a.createElement(At,{edit:!0,lan:this.props.lan,loc:this.props.locations[this.props.match.params.id],onInput:this.onInput})),r.a.createElement(U.a,{horizontal:!0}),r.a.createElement("div",{className:"row centered menu-bar"},r.a.createElement(M.a.Group,{widths:"3"},r.a.createElement(M.a,{as:c.b,to:"/user",content:e[2]}),r.a.createElement(M.a,{color:"grey",content:e[3]}),r.a.createElement(M.a,{color:"blue",icon:"thumbs up",content:e[1],onClick:this.onSubmit}))))}}]),a}(r.a.Component),Ft=Object(s.b)(function(e){return{locations:e.user.locations}},{userUpdateLocation:function(e,t,a){return function(n){E.updateLocation(a,t).then(function(t){console.log(t),n(P(e,a))})}}})(Tt);function Mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Ut=function(e){Object(Z.a)(a,e);var t=Mt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{},bg:"",lat:"",code:"",number:"",ui:{en:["Street:lat","City:bg","City:lat","#","Next","Edit","Reset","System message:","Country","post","Street:bg","Add Location","Add Street"],es:["Calle:lat","Ciudad:bg","City:lat","#","Seguir","Editar","Cancelar","Mensaje del sistema:","Pais","postal","Calle:bg","Nueva Locacion","Nueva Calle"],bg:["\u0423\u043b\u0438\u0446\u0430:\u043b\u0430\u0442","\u0413\u0440\u0430\u0434:\u0431\u0433","\u0413\u0440\u0430\u0434:\u043b\u0430\u0442","#","\u0417\u0430\u043f\u0430\u0437\u0438","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439","\u0418\u0437\u0447\u0438\u0441\u0442\u0438","\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e \u0441\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435:","\u0414\u044a\u0440\u0436\u0430\u0432\u0430","\u043a\u043e\u0434","\u0423\u043b\u0438\u0446\u0430:\u0431\u0433","\u041d\u043e\u0432 \u0410\u0434\u0440\u0435\u0441","\u041d\u043e\u0432\u0430 \u0423\u043b\u0438\u0446\u0430"]},message:"",msgClosed:!0,locate:!1},e.onReset=function(t){t&&t.preventDefault(),e.setState({data:{},bg:"",lat:"",code:"",locate:!1,msgClosed:!0,message:"",number:""})},e.closeMessage=function(t){t.preventDefault(),e.setState({message:{}})},e.onChange=function(t,a){var n=a.name,r=a.value;r="number"===n?Number(r):r,e.setState(Object(J.a)({data:Object(d.a)({},e.state.data,Object(J.a)({},n,r))},n,r))},e.onCity=function(t,a){var n,r=a.name,c=a.value,o=e.state.city,i=e.props.loc,l=o[i].findIndex(function(e){return e.c===c}),s=o[i][l].code;e.setState({data:Object(d.a)({},e.state.data,(n={},Object(J.a)(n,r,c),Object(J.a)(n,"post",s),n))})},e.onStreet=function(t){e.setState({data:Object(d.a)({},e.state.data,t)})},e.onSubmit=function(){var t=e.state,a=t.data,n=t.locate,r=e.props,c=r.city,o=r.addLocation,i=c?n?"location":"street":"city";c&&(a.city=c),console.log("POST Location: ",a),o(a,i).then(function(t){e.setState(Object(d.a)({},e.state,t))}),e.onReset()},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.lan,n=t.city,c=t.cities,o=t.streets,i=this.state,l=i.message,s=i.locate,u=this.state.ui[a];return c&&!o?c.bg.map(function(e){return e.c}).sort().map(function(e,t){return{key:t+1,value:e.id,text:e.title}}):o&&o.map(function(e,t){return{key:t+1,value:e.id,text:e.title}}),r.a.createElement($.a,{onSubmit:this.onSubmit},r.a.createElement($.a.Group,null,r.a.createElement("div",{className:"ui grid",style:{width:"100vw"}},Object.keys(l).length>0&&r.a.createElement("div",{className:"margined full-width"},r.a.createElement(ee.a,{as:"div",positive:!0,size:"tiny",onDismiss:this.closeMessage,header:u[7],content:l})),!n&&r.a.createElement("div",{className:"row centered"},r.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},r.a.createElement($.a.Input,{fluid:!0,name:"bg",onChange:this.onChange,value:this.state.bg,placeholder:u[1]})),r.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},r.a.createElement($.a.Input,{fluid:!0,name:"lat",onChange:this.onChange,value:this.state.lat,placeholder:u[2]})),r.a.createElement("div",{className:"twelve wide column"},r.a.createElement($.a.Input,{fluid:!0,name:"code",onChange:this.onChange,value:this.state.code,placeholder:u[3]}))),!s&&n&&r.a.createElement("div",{className:"row centered"},r.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},r.a.createElement($.a.Input,{fluid:!0,name:"bg",onChange:this.onChange,value:this.state.bg,placeholder:u[10]})),r.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},r.a.createElement($.a.Input,{fluid:!0,name:"lat",onChange:this.onChange,value:this.state.lat,placeholder:u[0]})),r.a.createElement("div",{className:"twelve wide column oval-but"},r.a.createElement(M.a,{fluid:!0,disabled:!this.state.data.bg||!this.state.data.lat,type:"submit",content:u[12]}),r.a.createElement(U.a,{horizontal:!0,content:"or"}),r.a.createElement(M.a,{fluid:!0,content:u[11],disabled:this.state.data.bg||this.state.data.lat,onClick:function(t){t.preventDefault(),t.stopPropagation(),e.setState({data:{},locate:!0})}}))),s&&r.a.createElement("div",{className:"row centered"},r.a.createElement("div",{style:{marginBottom:"10px"}},!!o.length&&r.a.createElement(me,{appsetup:!1,name:"street_id",list:o,lan:a,onStreet:this.onStreet})),r.a.createElement("div",{className:"six wide column",style:{marginBottom:"10px"}},r.a.createElement($.a.Input,{fluid:!0,name:"number",onChange:this.onChange,value:this.state.number,placeholder:u[3]}))))))}}]),a}(r.a.Component);function qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Bt=function(e){Object(Z.a)(a,e);var t=qt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{},logging:!1,errors:{},ui:{en:["Check","example@mail.com","my-secret-password","Save"],es:["Consulta","ejemplo@mail.com","mi-contrasena-secreta","Guardar"],bg:["\u041f\u0440\u043e\u0432\u0435\u0440\u0438","example@mail.com","\u0441\u0435\u043a\u0440\u0435\u0442\u043d\u0430\u0442\u0430-\u043c\u0438-\u043f\u0430\u0440\u043e\u043b\u0430","\u0417\u0430\u043f\u0430\u0437\u0438"]}},e.onSubmit=function(){var t=e.state.data,a=e.props,n=a.submit,r=a.login,c=a.init,o=a.pass,i=e.validate(t);e.setState({errors:i}),o||0!==Object.keys(i).length?0===Object.keys(i).length&&(r(t,!0),c()):n(t,!1)},e.validate=function(t){var a={};return e.props.pass?t.password.length<8&&(a.password="Minimum password length must be 8 digits!"):Q.a.isEmail(t.email)||(a.email="Invalid email address! Try again..."),a},e.onInput=function(t,a){var n=a.name;e.setState({data:Object(d.a)({},e.state.data,Object(J.a)({},n,t.target.value))})},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.state.ui[this.props.lan],t=this.props.pass,a=this.state.errors;return r.a.createElement("div",{className:t?"custom-form oval-but alert":"custom-form oval-but"},r.a.createElement($.a,{onSubmit:this.onSubmit},r.a.createElement($.a.Input,{fluid:!0,required:!0,inline:!0,centered:!0,focus:!0,onChange:this.onInput,name:t?"password":"email",type:t?"password":"email",placeholder:t?e[2]:e[1]}),Object.keys(a).length>0&&r.a.createElement(ee.a,{negative:!0},r.a.createElement(ee.a.Header,null,t?"Incomplete password:":"Incorrect email:"),r.a.createElement("p",null,t?a.password:a.email)),r.a.createElement(M.a,{type:"submit",color:"grey",fluid:t},t?e[3]:e[0])))}}]),a}(r.a.Component),Gt=function(e){e.admin;var t=e.lan;return r.a.createElement(Bt,{submit:function(){},init:function(){},lan:t,pass:!1})},Ht={locations:{addLocation:function(e,t){return v.a.post("/admin/location/"+t,{data:e}).then(function(e){return e.data})},getList:function(e){return v.a.get("/admin/location/city",{data:e}).then(function(e){return console.log(e)})}}};function Jt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Wt=function(e){Object(Z.a)(a,e);var t=Jt(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={view:"",ui:{en:["Location in:"],es:["Localidad en:"],bg:["\u0410\u0434\u0440\u0435\u0441 \u0432:"]}},e}return Object(Y.a)(a,[{key:"render",value:function(){var e=this.props,t=e.addLocation,a=e.lan,n=e.city,c=e.cities,o=e.streets,i=e.view,l=this.state.ui[a],s=c.length>0?c.find(function(e){return console.log(e.id),e.id===n}):"";return console.log("city?: ",c.length,s.title),r.a.createElement("div",{className:"topped padded"},r.a.createElement("h3",null,l[0].concat(" ",n?s.alt:"Add City")),r.a.createElement(U.a,{horizontal:!0}),"add"===i&&r.a.createElement("div",{className:"custom-form"},r.a.createElement(Ut,{lan:a,city:n,streets:o,addLocation:t})),r.a.createElement(U.a,{horizontal:!0}),"rep"===i&&r.a.createElement(Gt,{admin:!0,lan:a,loc:"bg",addLocation:t}))}}]),a}(r.a.Component),Yt=Object(s.b)(function(e){return{cities:e.settings.cities,streets:e.settings.streets}},{addLocation:function(e,t){return function(a){return console.log("Add location: ",e,t),Ht.locations.addLocation(e,t).then(function(e){return e})}}})(Wt);function Zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var Vt=function(e){Object(Z.a)(a,e);var t=Zt(a);function a(){return Object(W.a)(this,a),t.apply(this,arguments)}return Object(Y.a)(a,[{key:"render",value:function(){return r.a.createElement($.a,null,"email"===this.props.view&&r.a.createElement($.a.Group,{inline:!0},r.a.createElement($.a.Input,{width:10,label:"email: ",placeholder:"user@mail.com"})),r.a.createElement(M.a,{content:"Submit"}))}}]),a}(r.a.Component),Xt=function(e){var t=e.view;e.lan;return r.a.createElement("div",{className:"topped padded"},"email"===t&&r.a.createElement(Vt,{view:t}),"list"===t&&r.a.createElement("div",null,"List Users"))},Kt=function(e){var t=e.lan,a=e.member,n=e.onMenu,c={en:["USER","LOC","PRO","LAB","FAC"],es:["USER","LOC","PRO","LAB","FAC"],bg:["USER","LOC","PRO","LAB","FAC"]};return r.a.createElement(M.a.Group,{color:"blue",widths:c[t].length},c[t].map(function(e,t){return r.a.createElement(M.a,{key:t,disabled:a>1&&Math.log2(a)+2!==t,name:t,content:e,onClick:n})}))},Qt=function(e){var t=e.lan,a=e.onMenu,n=e.subset;return r.a.createElement(M.a.Group,{color:"blue",className:"submenu"},{en:{user:["home","email","list","order"],pro:["home","add","edit","rep"],loc:["home","add","edit","rep"],fac:["home","add","edit","rep"],lab:["home","add","edit","rep"]},es:{user:["home","email","list","order"],pro:["home","add","edit","rep"],loc:["home","add","edit","rep"],fac:["home","add","edit","rep"],lab:["home","add","edit","rep"]},bg:{user:["home","email","list","order"],pro:["home","add","edit","rep"],loc:["home","add","edit","rep"],fac:["home","add","edit","rep"],lab:["home","add","edit","rep"]}}[t][n].map(function(e,t){return r.a.createElement(M.a,{onClick:a,name:e,content:t?e:"",icon:t?"":"home"})}))};function $t(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(X.a)(e);if(t){var r=Object(X.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(V.a)(this,a)}}var ea=function(e){Object(Z.a)(a,e);var t=$t(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={main:!0,mView:"",sView:"",logged:!1,checkin:!1,ui:{en:["Admin","LAB Admin.","FAC Admin."],es:["Admin","LAB Admin.","FAC Admin."],bg:["\u0410\u0434\u043c\u0438\u043d","LAB \u0410\u0434\u043c\u0438\u043d.","FAC \u0410\u0434\u043c\u0438\u043d."]}},e.onSubMenu=function(t,a){var n=a.name;e.setState({main:"home"===n,sView:n})},e.onMainMenu=function(t,a){var n=a.content,r=a.name;e.setState({main:!1,mView:n.toLowerCase(),indx:r})},e.onCheck=function(t,a){var n=a.name;switch(e.setState(function(e){return Object(J.a)({},n,!e[n])}),n){case"checkin":e.state.checkin||console.log("Check Boss In-Out");break;case"logged":e.state.logged&&e.closeSession()}},e.closeSession=function(t){localStorage.clear(),A(),e.props.userSignedIn({})},e}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.city,a=e.getLocations,n=(e.user,e.logedin);t&&(a("street",t),this.setState({logged:n}))}},{key:"render",value:function(){var e=this.props,t=e.lan,a=e.city,n=e.membership,c=this.state,o=c.main,i=c.sView,l=c.mView,s=(this.state.ui[t],o?{left:0}:{left:"-".concat(window.screen.width,"px")});return r.a.createElement("div",{className:"App-content padded Admin-Page"},r.a.createElement(Xe.a,null,r.a.createElement(Xe.a.Row,null,r.a.createElement(Xe.a.Column,{width:6},r.a.createElement(at.a,{name:"logged",checked:this.state.logged,disabled:this.state.checkin,label:r.a.createElement("label",null,this.state.login?"Login":"Logout"),onChange:this.onCheck,toggle:!0})),r.a.createElement(Xe.a.Column,{width:4}),r.a.createElement(Xe.a.Column,{width:6},n>2&&r.a.createElement(at.a,{name:"checkin",checked:this.state.checkin,disabled:!this.state.logged,label:r.a.createElement("label",null,this.state.checkin?"Close":"Open"),onChange:this.onCheck,toggle:!0})))),r.a.createElement("br",null),r.a.createElement("div",{className:"menu-bar carrousel move",style:s},r.a.createElement(Kt,{lan:t,member:n,onMenu:this.onMainMenu}),r.a.createElement(U.a,{horizontal:!0}),!o&&r.a.createElement(Qt,{member:n,subset:l,lan:t,onMenu:this.onSubMenu})),"email"===i&&r.a.createElement(Xt,{view:i,lan:t}),"list"===i&&r.a.createElement(Xt,{view:i,lan:t}),"add"===i&&r.a.createElement(Yt,{city:a||!1,view:i,lan:t}))}}]),a}(r.a.Component),ta=Object(s.b)(function(e){return{city:e.settings.city,cities:e.settings.cities,membership:e.user.membership,logedin:!!e.user.token}},{getLocations:k,userSignedIn:D})(ea),aa=Object(s.b)(function(e){return{lan:e.settings.lan}})(function(e){var t=e.location;e.lan;return r.a.createElement("div",{className:"App"},r.a.createElement(o.b,{location:t,path:"/",exact:!0,component:we}),r.a.createElement(o.b,{location:t,path:"/",component:Le}),r.a.createElement(Ve,{location:t,path:"/admin/location",exact:!0,component:Yt}),r.a.createElement(Ve,{location:t,path:"/admin/home",component:st}),r.a.createElement(Ve,{location:t,path:"/admin/boss",exact:!0,component:ta}),r.a.createElement(Ze,{location:t,path:"/admin",exact:!0,component:dt}),r.a.createElement(Ze,{location:t,path:"/order",exact:!0,component:He}),r.a.createElement(Ze,{location:t,path:"/catalog",exact:!0,component:Ye}),r.a.createElement(Ze,{location:t,path:"/repeat",exact:!0,component:mt}),r.a.createElement(Ze,{location:t,path:"/play",exact:!0,component:ft}),r.a.createElement(Ze,{location:t,path:"/cart",exact:!0,component:Et}),r.a.createElement(Ze,{location:t,path:"/user",exact:!0,component:jt}),r.a.createElement(Ze,{location:t,path:"/user/locations",exact:!0,component:zt}),r.a.createElement(Ze,{location:t,path:"/user/location/:id",exact:!0,component:Ft}))}),na=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,ra=Object(u.e)(f,{user:{},settings:{lan:"bg",socket:!1,one_city:0,banner:!1,order_counter:0,customer_counter:0},products:[],order:[],cart:[]},na(Object(u.a)(m.a)));if(window.GS=ra,localStorage.valePizzaJWT){var ca={new_user:!1};ca.token=localStorage.valePizzaJWT,A(ca.token),ra.dispatch(D(ca)),ra.dispatch(x()).then(function(e){e.locations}).catch(function(e){A(),ca.token="",ca.new_user=!0,ra.dispatch(D(ca)),console.log("initialUser: ",e.response.data.error)})}_("bg"),ra.dispatch(S()),ra.dispatch(w("bg"));var oa=r.a.createElement(s.a,{store:ra},r.a.createElement(c.a,null,r.a.createElement(o.b,{component:aa})));l.a.render(oa,document.getElementById("root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.4001973c.chunk.js.map