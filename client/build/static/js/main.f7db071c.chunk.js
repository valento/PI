(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{248:function(e,t,a){e.exports=a.p+"static/media/pi_pie.90b4f22b.svg"},249:function(e,t,a){e.exports=a.p+"static/media/pi_pi.27d4ed5a.svg"},282:function(e,t,a){e.exports=a(523)},292:function(e,t,a){},523:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),c=a.n(o),i=a(21),l=a(62),s=a(70),u=a.n(s),m=a(22),d=a(60),p=a(247),h=(a(291),a(292),a(15)),f=a(72),b=Object(d.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETUP_CHANGED":return Object(h.a)({},e,t.data);case"ORDER_COUNTER":return Object(h.a)({},e,{order_counter:e.order_counter+1});case"CUSTOMER_COUNTER":return Object(h.a)({},e,t.data);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SIGNED":return t.user;case"USER_LOCATION":return Object(h.a)({},e,t.user);case"USER_UPDATE_LOCATION":return Object(h.a)({},e,{locations:e.locations.map(function(e,a){return a===t.ind?Object(h.a)({},e,t.data):e})});case"USER_ADD_LOCATION":return Object(h.a)({},e,{locations:e.locations?[].concat(Object(f.a)(e.locations),[t.data]):[t.data]});case"USER_INIT":return Object(h.a)({},e,t.user);default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST":return t.data;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_LIST":return t.order;case"ORDER_CLEAR":return[];default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_LIST":return t.order;case"CART_CLEAR":return[];default:return e}},facs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAC":return console.log("New fac?: ",t.facs),t.fac;case"FAC_STATE":return Object(h.a)({},e,t.data);default:return e}}}),g=a(59),E=a(30),v=a.n(E),y={setUI:function(){return v.a.get("/ui").then(function(e){return e.data})},getLocationList:function(e,t){return v.a.get("/admin/location/"+e+"/"+t).then(function(e){return e.data})},getProductList:function(e){return v.a.get("/products/"+e).then(function(e){return e.data})},getLocation:function(e){return v.a.get("/admin/location/ref/"+e).then(function(e){return e.data})},getLocationFac:function(e){return v.a.post("/user/facs",{id:e}).then(function(e){return e.data})},setupFac:function(e){var t=e.id,a=Object(g.a)(e,["id"]);return v.a.post("/user/fac/"+t,a).then(function(e){})}},O={signup:function(e){return v.a.post("/auth",{credentials:e}).then(function(e){return e.data.user})},checkOne:function(){return v.a.get("/auth/check").then(function(e){return e.data})},initUser:function(){return v.a.get("/user").then(function(e){return e.data.user})},addLocation:function(e){return v.a.post("/user/location",{data:e}).then(function(e){return console.log(e),e.data.id})},updateLocation:function(e,t){return v.a.post("/user/location/"+t,{data:e}).then(function(e){return e.data})}},C={pushOrder:function(e){return v.a.post("/orders",{data:e}).then(function(e){return e.data})},collection:function(e){return v.a.get("/admin/fac/".concat(e,"/orders"))}},j=function(e){return{type:"SETUP_CHANGED",data:e}},S=function(e){return{type:"FAC_STATE",data:e}},w=function(e){return{type:"SET_FAC",fac:e}},k=function(e){return function(t){return y.setUI(e).then(function(e){t(j(e))})}},N=function(e,t){return function(a){return y.getLocationList(e,t).then(function(e){console.log("getLocationsList: ",e),a(j(e))})}},A=function(e){return function(t){return y.getProductList(e).then(function(e){t(function(e){return{type:"PRODUCT_LIST",data:e}}(e))})}},L=function(e){return function(t){return console.log("Socket Action: ",e),e.order?t({type:"ORDER_COUNTER"}):e.hasOwnProperty("open")?t(S({open:e.open})):t(function(e){return{type:"CUSTOMER_COUNTER",data:e}}(e))}},R=function(e){return function(t){return y.getLocation(e).then(function(e){if(e)return e}).catch(function(e){return{error:8}})}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?v.a.defaults.headers.common.Authorization=e:delete v.a.defaults.headers.common.Authorization},D=function(e){return{type:"USER_SIGNED",user:e}},z=function(e){return{type:"USER_INIT",user:e}},_=function(e){return{type:"USER_ADD_LOCATION",data:e}},T=function(e,t){return{type:"USER_UPDATE_LOCATION",ind:e,data:t}},P=function(){return function(e){return new Promise(function(t,a){O.initUser().then(function(a){e(z(a)),t(a)}).catch(function(e){a(e)})})}},x=function(e,t){return function(a){y.getLocation(e).then(function(e){a(T(t,e))})}},F=function(e){e?v.a.defaults.headers.common["Accepted-Language"]=e:delete v.a.defaults.headers.common["Accepted-Language"]},U=a(6),M=a.n(U),q=a(534),B=a(524),G=a(248),H=a.n(G),J=a(249),W=a.n(J),Y=a(25),Z=a(16),V=a(17),X=a(19),K=a(18),Q=a(20),$=a(82),ee=a.n($),te=a(535),ae=a(537),ne=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},logging:!1,errors:{},ui:{en:["register","example@mail.com","my-secret-password","Save"],es:["registro","micorreo@mail.com","mi-contrasena-secreta","Gurdar"],bg:["\u0432\u043b\u0435\u0437","example@mail.com","\u043f\u0430\u0440\u043e\u043b\u0430","\u0412\u043b\u0435\u0437"]}},a.onSubmit=function(){var e=a.state.data,t=a.props,n=t.pass,r=t.submit,o=t.login,c=a.validate(e);a.setState({errors:c}),0===Object.keys(c).length&&(n?o(e,!0):r(e,!1).then(function(e){}))},a.validate=function(e){var t={};return a.props.pass?e.password.length<8&&(t.password="Minimum password length must be 8 digits!"):ee.a.isEmail(e.email)||(t.email="Invalid email address! Try again..."),t},a.onInput=function(e,t){var n=t.name;a.setState({data:Object(h.a)({},a.state.data,Object(Y.a)({},n,e.target.value))})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.state.ui[this.props.lan],t=this.props.pass,a=this.state.errors;return c.a.createElement("div",{className:t?"custom-form oval-but alert":"custom-form oval-but"},c.a.createElement(te.a,{onSubmit:this.onSubmit},c.a.createElement(te.a.Input,{fluid:!0,required:!0,inline:!0,centered:!0,focus:!0,onChange:this.onInput,name:t?"password":"email",type:t?"password":"email",placeholder:t?e[2]:e[1]}),Object.keys(a).length>0&&c.a.createElement(ae.a,{negative:!0},c.a.createElement(ae.a.Header,null,t?"Incomplete password:":"Incorrect email:"),c.a.createElement("p",null,t?a.password:a.email)),c.a.createElement(B.a,{type:"submit",fluid:t,color:t?"red":"black"},t?e[3]:e[0])))}}]),t}(c.a.Component),re=a(99),oe=function(e){var t=e.size;return c.a.createElement(re.a,{size:t,circular:!0,basic:!0},"\u03c0")},ce=function(e){var t=e.lan,a=e.open,n={en:["Play","Eat","Repeat","See"],es:["Jugar","Comer","Repetir","Ver"],bg:["\u0418\u0433\u0440\u0430\u0439","\u042f\u0436","\u041f\u043e\u0432\u0442\u043e\u0440\u0438","\u0412\u0438\u0436"]}[t];return c.a.createElement("div",{className:"menu-bar"},c.a.createElement(B.a.Group,{color:"grey"},c.a.createElement(B.a,{as:i.b,to:"/play",icon:"play circle",content:n[0]}),c.a.createElement(B.a,{as:i.b,to:a?"/order":"/catalog",icon:a?"food":"eye",content:a?n[1]:n[3]}),c.a.createElement(B.a,{as:i.b,to:"/repeat",icon:"undo",content:n[2]})))},ie=a(536),le=a(47),se=a.n(le),ue=a(538),me=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={value:"",results:[],isLoading:!1,data:{},ui:{en:["Cancel","Submit","No service in that City","Sorry:"],es:["Cancelar","Confirmar","Sin servicio en esta Ciudad","Perdona, pero:"],bg:["\u0418\u0437\u0442\u0440\u0438\u0439","\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438","\u041d\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0432\u0430\u043c\u0435 \u0442\u043e\u0437\u0438 \u0433\u0440\u0430\u0434 \u0432\u0441\u0435 \u043e\u0449\u0435...","\u0421\u044a\u0436\u0430\u043b\u044f\u0432\u0430\u043c\u0435, \u043d\u043e:"]}},a.resetComponent=function(){return a.setState({isLoading:!1,results:[],value:""})},a.handleResultSelect=function(e,t){var n=t.result,r=t.name;a.setState(Object(h.a)({},a.state,{value:n.title,data:Object(h.a)({},a.state.data,Object(Y.a)({},r,n.id)),message:null})),a.props.appsetup||a.props.onStreet(Object(Y.a)({},r,n.id))},a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout(function(){if(a.state.value.length<1)return a.resetComponent();var e=new RegExp(se.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,results:se.a.filter(a.props.list,function(t){return e.test(t.title)})})},300)},a.onSubmit=function(e){e.preventDefault();var t=a.props,n=t.appsetup,r=t.onSubmit,o=a.state.data;n&&r(o)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentWillMount",value:function(){this.resetComponent()}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.results,n=e.isLoading,r=e.data,o=e.message,i=this.state.ui[this.props.lan],l=this.props,s=l.name,u=l.appsetup;return c.a.createElement("div",{className:"custom-form padded"},c.a.createElement(te.a.Group,{onSubmit:this.onSubmit},c.a.createElement(te.a,null,c.a.createElement("div",{className:"ui grid"},c.a.createElement("div",{className:"grid column sixteen wide"},c.a.createElement(ue.a,Object.assign({fluid:!0,name:s,loading:n,onResultSelect:this.handleResultSelect,onSearchChange:se.a.debounce(this.handleSearchChange,500,{leading:!0}),results:a,value:t},this.props))),o&&"0"!==o&&c.a.createElement(ae.a,{negative:!0,size:"mini"},c.a.createElement(ae.a.Header,null,i[3]),c.a.createElement("p",null,i[2])),u&&c.a.createElement("div",{className:"grid column sixteen wide oval-but extra-padded"},c.a.createElement(B.a,{type:"submit",basic:0===Object.keys(r).length,disabled:0===Object.keys(r).length,name:s,color:"grey",content:i[1]}))))))}}]),t}(c.a.Component),de=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["Your City/Zone:","ENG","ESP","\u0411\u0413"],es:["Tu Ciudad/Zona:","ENG","ESP","\u0411\u0413"],bg:["\u0418\u0437\u0431\u0435\u0440\u0438 \u0413\u0440\u0430\u0434/\u0417\u043e\u043d\u0430:","ENG","ESP","\u0411\u0413"]},errors:{en:{header:["Not your City/Zone"],message:["Pick a Zone/City closer to you"]},es:{header:["No es tu Zona o Ciudad"],message:["Seleccione una Zona/Ciudad mas cercana"]},bg:{header:["\u041d\u0435 \u0435 \u0442\u0432\u043e\u044f\u0442 \u0413\u0440\u0430\u0434/\u0417\u043e\u043d\u0430"],message:["\u0418\u0437\u0431\u0435\u0440\u0438 \u0437\u043e\u043d\u0430 \u0438\u043b\u0438 \u0433\u0440\u0430\u0434, \u0431\u043b\u0438\u0437\u043a\u0438 \u0434\u043e \u0442\u0435\u0431"]}},confirm:!1,error:0},a.onLanguage=function(e,t){var n=t.name,r=a.props,o=r.setInterface,c=r.setUI,i=r.getProductList;o({lan:n}),F(n),c(n),i(n)},a.onSubmit=function(e){var t=a.props,n=t.appsetup,r=t.setInterface,o=t.initialUser;if(console.log(e),n){if(1!==a.props.list.find(function(t){return t.id===e.city}).status)return a.setState({error:1,confirm:!0});r(e)}else o(e)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.lan,n=t.appsetup,r=t.name,o=t.list,i=t.setup,l=this.state.ui[a];return c.a.createElement("div",{className:"vintage left"},"city"===r&&c.a.createElement("p",null,l[0]),c.a.createElement(me,{lan:a,appsetup:n,onSubmit:this.onSubmit,setup:i,name:r,list:o}),c.a.createElement(q.a,{horizontal:!0}),c.a.createElement("div",{className:"menu-bar"},c.a.createElement(B.a.Group,{color:"grey",size:"mini"},c.a.createElement(B.a,{onClick:this.onLanguage,disabled:"en"===a,name:"en",content:l[1]}),c.a.createElement(B.a,{onClick:this.onLanguage,disabled:"es"===a,name:"es",content:l[2]}),c.a.createElement(B.a,{onClick:this.onLanguage,disabled:"bg"===a,name:"bg",content:l[3]}))),c.a.createElement("div",{className:"eight wide column"},c.a.createElement(ie.a,{header:this.state.errors[a].header[this.state.error-1],content:this.state.errors[a].message[this.state.error-1],open:this.state.confirm,onCancel:function(t){return e.setState({confirm:!1,error:0})},onConfirm:function(t){return e.setState({confirm:!1,error:0})}})))}}]),t}(c.a.Component),pe=Object(m.b)(function(e){return{lan:e.settings.lan}},{initialUser:z,setInterface:j,setUI:k,getProductList:A})(de),he=["root","lab","fac","baker","pos","dlv","test","rep","customer"],fe=function(e,t,a,o){var c=function(e,t,a,n){switch(e){case 2:return n;case 4:case 8:case 64:return a;default:return t}}(t,e,a,null);"rep"===(r=function(e){var t=e?e.toString(2).split("").reverse():0;console.log("memberships: ",t);var a;return 0===(a=he.filter(function(e,a){return 1===Number(t[a])})).length?"home":a.length>1?a[a.length-1]:a[0]}(t))&&(r="customer");var i="wss://pizzapi.co/?id=".concat(c,"&fac=").concat(a);console.log("Role/ID: ",r,c),console.log("WS on: ",i),(n=new WebSocket(i,"".concat(r,"-protocol"))).onerror=function(e){return console.log("WebSocket error: "+e)},n.onopen=function(){console.log("".concat(r,"-Socket on Client")),o({socket:!0})}},be=function(e){console.log("".concat(r," Suscribed: ").concat(e)),n.onmessage=function(t){console.log("WS: ",t.data);var a=JSON.parse(t.data);if(!e)return console.log(t.data);e(a)}},ge=function(e,t){n.send(t)},Ee=function(e){n.close()},ve=function(e){var t=e.isAuthorized,a=e.user,n=(e.lab,e.fac),r=e.lan,o=e.city,l=(e.one_city,e.cities),s=e.socket,u=e.signUp,m=e.userInit,d=e.getLocalFacs,p=e.getFacStore,h=e.setInterface,f=e.socketCounter,b={ui:{es:["Bienvenido, ","Hola, ","Estas en:","Admin","LAB","FAC","PoS","Courier","REP","CERRADO"],en:["Hello, ","Welcome back, ","You're in:","Admin","LAB","FAC","PoS","Courier","REP","CLOSED"],bg:["\u0414\u043e\u0431\u0440\u0435 \u0434\u043e\u0448\u044a\u043b, ","\u0417\u0434\u0440\u0430\u0432\u0435\u0439, ","\u041d\u0430\u043c\u0438\u0440\u0430\u0448 \u0441\u0435 \u0432\u044a\u0432:","Admin","LAB","FAC","PoS","\u041a\u0443\u0440\u0438\u0435\u0440","REP","\u0417\u0410\u0422\u0412\u041e\u0420\u0415\u041d\u041e"]},error:{header:"Not Your Bakery!",message:"Change Zone/City?"}},g=a.membership,E=a.new_user,v=a.username,y=a.uid,O=void 0===E||E,C=["boss","lab","fac","baker","pos","dlv","tester","rep","customer"],j=g?g.toString(2).split("").reverse():0,S=[];if(C.forEach(function(e,t){Number(j[t])&&S.push(C[t])}),0===S.length?"home":S.length>1?S.join("/"):S[0],o&&!Object.keys(n).length>0){var w={};w.city=o,p(w)}if(t&&Object.keys(n).length>0&&!s)switch(fe(y,g,n.id,h),g){case 1:case 2:case 4:break;case 8:case 12:be(f);break;default:be(f)}var k=new Date("Januar 1, 00 ".concat(n.work_open)),N=new Date("Januar 1, 00 ".concat(n.day_close)),A=new Date("Januar 1, 00 ".concat(n.noon_open)),L=new Date("Januar 1, 00 ".concat(n.work_close));return c.a.createElement("div",{className:"App-content topped padded"},c.a.createElement("div",{className:"init central padded"},c.a.createElement("div",{className:"logo-still"},c.a.createElement("img",{src:H.a,className:"logo",alt:"logo"}),c.a.createElement("img",{src:W.a,className:"logo-top",alt:"logo"})),void 0!==o&&c.a.createElement("p",{className:"vintage no-border"},r?O?b.ui[r][0]:b.ui[r][1]:"\u0414\u043e\u0431\u0440\u0435 \u0434\u043e\u0448\u044a\u043b",v||c.a.createElement(oe,{size:"huge"})),o?t?g>63?c.a.createElement(ce,{lan:r,open:n.open}):null:c.a.createElement(ne,{submit:u,getFacs:d,init:m,lan:r,pass:!1}):c.a.createElement(pe,{lan:r,list:l,appsetup:"true",name:"city"}),c.a.createElement(q.a,{horizontal:!0}),t&&g&&g<128&&c.a.createElement(B.a,{basic:!0,color:"blue",as:i.b,to:1!==g&&Object.keys(n).length>0?"/admin/home":"/admin/boss",disabled:!o},"Hello, ",S[S.length-1],"!"),!!o&&!n.open&&a.membership>63&&c.a.createElement("div",{className:"fac-info"},c.a.createElement("div",{className:"fac-lable"},c.a.createElement("div",{className:"fac-closed"},c.a.createElement("h3",null,b.ui[r][9]))),c.a.createElement("p",null,"".concat(k.getHours(),":").concat(k.getMinutes()>0?k.getMinutes():"00"," -\n            ").concat(N.getHours(),":").concat(N.getMinutes()>0?k.getMinutes():"00")),c.a.createElement("p",null,"".concat(A.getHours(),":").concat(A.getMinutes()>0?k.getMinutes():"00"," -\n            ").concat(L.getHours(),":").concat(L.getMinutes()>0?k.getMinutes():"00")))))};ve.propType={lan:M.a.number.isRequired};var ye=Object(m.b)(function(e){return{lan:e.settings.lan,socket:e.settings.socket,cities:e.settings.cities,city:e.settings.city,one_city:e.settings.one_city,isAuthorized:!!e.user.token,fac:e.facs,user:e.user}},{signUp:function(e,t){return function(a){if(!t)return new Promise(function(t,n){O.signup(e).then(function(e){localStorage.valePizzaJWT=e.token,I(e.token),a(D(e)),a(function(e){return{type:"USER_INIT",user:e}}(e)),t(e)})})}},userInit:P,getLocalFacs:function(e){return function(e){}},setInterface:j,getFacStore:function(e){var t=e.city;return function(e){return y.getLocationFac(t).then(function(t){e(w(t))})}},socketCounter:L})(ve),Oe=a(53),Ce=a(73),je=function(){return{type:"CART_CLEAR"}},Se=function(e){var t=e.disabled;return c.a.createElement("div",null,t?c.a.createElement("div",{className:"user disabled"},c.a.createElement(Ce.a,{inverted:t,name:"user"}),c.a.createElement("span",null,"|"),c.a.createElement(Ce.a,{inverted:t,name:"shopping cart"})):c.a.createElement("div",{className:"user"},c.a.createElement(i.b,{to:"/user"},c.a.createElement(Ce.a,{name:"user"})),c.a.createElement("span",null,"|"),c.a.createElement(i.b,{to:"/cart"},c.a.createElement(Ce.a,{name:"shopping cart"}))))},we=function(e){var t=e.city,a=e.fac,n=e.cities,r=e.lan,l=e.isAuthorized,s=e.socket,u=e.user,m=e.setInterface,d=e.setLocationFactory,p=e.clearCart,f={ui:{en:["No City","? Change City","You are about to change city/zone"],es:["Ciudad","? Cambiar Ciudad","Estas por cambiar la zona/ciuda de tu orden"],bg:["\u0413\u0440\u0430\u0434","? \u0421\u043c\u0435\u043d\u0438 \u0417\u043e\u043d\u0430/\u0413\u0440\u0430\u0434","\u041f\u0440\u0438 \u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0449\u0435 \u0441\u043c\u0435\u043d\u0438\u0448 \u0433\u0440\u0430\u0434\u0430/\u0437\u043e\u043d\u0430\u0442\u0430"]}},b=Object(o.useState)(!1),g=Object(Oe.a)(b,2),E=g[0],v=g[1],y=f.ui[r][0];return n&&n.forEach(function(e){e.id===t&&(y=e.alt?e.alt:e.title)}),c.a.createElement("div",{className:"ui grid Top"},c.a.createElement("div",{className:"four wide column"},c.a.createElement(i.b,{to:function(e){if(!a.checkin&&u.membership<63||u.membership>63)return Object(h.a)({},e,{pathname:"/"})}},c.a.createElement(Ce.a,{name:"home",color:!a.checkin||u.membership>63?"black":"grey"})),t&&c.a.createElement(Ce.a.Group,null,c.a.createElement(Ce.a,{color:a.open?"blue":"grey",name:"clock"}))),c.a.createElement("div",{className:"eight wide column"},c.a.createElement(ie.a,{header:f.ui[r][1],content:f.ui[r][2],open:E,onCancel:function(e){return v(!1)},onConfirm:function(e){v(!1),d({}),p(),s&&Ee(),m({city:null,socket:!1})}}),c.a.createElement(i.b,{to:"/",onClick:function(e){return v(!0)}},c.a.createElement(Ce.a,{color:t?"blue":"grey",name:"map marker"}),y)),c.a.createElement("div",{className:"four wide column"},c.a.createElement(Se,{lan:r,disabled:!(l&&t&&u.membership>64&&1!==u.membership)})))};we.propType={fac:M.a.shape({id:M.a.number.isRequired}).isRequired};var ke=Object(m.b)(function(e){return{lan:e.settings.lan,socket:e.settings.socket,city:e.settings.city,fac:e.facs,cities:e.settings.cities,isAuthorized:!!e.user.token,user:e.user}},{setInterface:j,setLocationFactory:w,clearCart:je})(we),Ne=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={item:{id:null,units:null},ui:{en:["Choose a ","+","Order","Invalid data","Qauntity should be a number","pizza","pi2","drink","beer","sauce"],es:["Selecione ","+","Pedir","Datos invalidos","La Cantidad es numero","pizza","pi2","gaseosa","cerveza","salsa"],bg:["\u0418\u0437\u0431\u0435\u0440\u0438 ","+","\u041f\u043e\u0440\u044a\u0447\u0430\u0439","\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0438 \u0434\u0430\u043d\u043d\u0438","\u0411\u0440\u043e\u044f\u0442 \u043f\u0438\u0446\u0438 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u0447\u0438\u0441\u043b\u043e","\u043f\u0438\u0446\u0430","\u043f2","\u0431\u0435\u0437\u0430\u043b\u043a\u043e\u0445\u043e\u043b\u043d\u043e","\u0431\u0438\u0440\u0430","\u0441\u043e\u0441"]},errors:{}},a.onChange=function(e,t){var n=t.name,r=t.value;"id"===n||""===r||ee.a.isNumeric(r)?a.setState({errors:{}}):a.setState({errors:{code:4}}),"units"===n&&r>5&&(r=5),"id"===n&&a.props.onItemSelect(r),a.setState({item:Object(h.a)({},a.state.item,Object(Y.a)({},n,Math.abs(r)))})},a.onAdd=function(){var e=a.state.item;a.props.onAddItem(e.id,e.units),a.setState({item:{id:null,units:null}})},a.shouldComponentUpdate=function(e){return a.props.category!==e.category&&a.setState({item:{id:null,units:null}}),!0},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lan,a=e.items,n=e.category,r=this.state,o=r.errors,i=r.item,l=this.state.ui[t],s=Object.keys(o).length>0,u=null===i.id||null===i.units;return c.a.createElement(te.a,{onSubmit:this.onAdd},c.a.createElement(te.a.Group,null,c.a.createElement("div",{className:"ui grid"},c.a.createElement("div",{className:"ten wide column"},c.a.createElement(te.a.Select,{onChange:this.onChange,key:213,name:"id",placeholder:l[0].concat(l[4+n]),options:a,value:i.id})),c.a.createElement("div",{className:"three wide column"},c.a.createElement(te.a.Input,{onChange:this.onChange,type:"number",required:!0,name:"units",placeholder:0,value:i.units||""})),c.a.createElement("div",{className:"three wide column"},c.a.createElement(B.a,{disabled:s||u,color:"blue",className:"add-but",type:"submit",content:l[1]}))),s&&c.a.createElement("div",{className:"margined full-width"},c.a.createElement(ae.a,{negative:!0},c.a.createElement(ae.a.Header,null,l[3]),c.a.createElement("p",null,l[o.code])))))}}]),t}(c.a.Component),Ae=function(e){var t=e.stat,a=e.empty,n=e.row,r=e.onDelete,o=e.ind,i=e.lan;return c.a.createElement("div",null,a?{en:["Nothing to order yet...."],es:["Nada de ordenar...."],bg:["\u041d\u0438\u0449\u043e \u0437\u0430 \u043f\u043e\u0440\u044a\u0447\u0432\u0430\u043d\u0435 \u0437\u0430 \u0441\u0435\u0433\u0430..."]}[i][0]:c.a.createElement("div",{className:"ui grid item"},c.a.createElement("div",{className:"two wide column nopad items"},!t&&c.a.createElement(Ce.a,{name:"eye"})),c.a.createElement("div",{className:"six wide column nopad"},n.name),c.a.createElement("div",{className:"three wide column nopad items"},c.a.createElement(Ce.a,{name:"x",size:"tiny"}),n.quant),c.a.createElement("div",{className:"three wide column nopad"},(parseFloat(n.price)*parseFloat(n.quant)).toFixed(2)),c.a.createElement("div",{className:"two wide column nopad"},!t&&c.a.createElement("span",{className:"",basic:!0,onClick:function(){return r(o)}},c.a.createElement(Ce.a,{name:"minus circle"})))))},Le=function(e){var t=e.stat,a=e.cart,n=e.lan,r=e.onDelete;return c.a.createElement("div",{className:0===a.length?"order-list empty":"order-list"},a.map(function(e,a){return c.a.createElement(Ae,{stat:t,lan:n,key:a,onDelete:r,row:e,ind:a})}),0===a.length&&c.a.createElement(Ae,{empty:!0,lan:n}))},Re=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["pizza order","Order","Pizza","P2","Drink","Beer","Sauce"],es:["pedido","Pedido","Pizza","P2","Gaseosa","Serveza","Salsa"],bg:["\u043f\u043e\u0440\u044a\u0447\u043a\u0430","\u041f\u043e\u0440\u044a\u0447\u0430\u0439","\u041f\u0438\u0446\u0430","\u041f2","\u041d\u0430\u043f\u0438\u0442\u043a\u0430","\u0411\u0438\u0440\u0430","\u0421\u043e\u0441"]},order:[]},a.onDeleteItem=function(e){a.setState({order:[].concat(Object(f.a)(a.state.order.slice(0,e)),Object(f.a)(a.state.order.slice(e+1)))})},a.onAddItem=function(e,t){console.log(Number(t)+" of "+e);var n=a.state.order.findIndex(function(t){return t.product===e}),r=a.props.products.findIndex(function(t){return t.id===e});n>-1?a.setState({order:[].concat(Object(f.a)(a.state.order.slice(0,n)),[Object(h.a)({},a.state.order[n],{quant:a.state.order[n].quant+Number(t)})],Object(f.a)(a.state.order.slice(n+1)))}):a.setState({order:a.state.order.concat({product:e,quant:Number(t),name:a.props.products[r].name,price:a.props.products[r].price})})},a.onOrder=function(e){a.props.addCart(a.state.order)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.cart;console.log("OrderComponent Mount: ",e.length),e.length>0&&this.setState({order:this.props.cart})}},{key:"render",value:function(){var e,t=0,a=this.props,n=a.lan,r=a.products,o=(a.facs,a.user,a.category),l=a.itemSelected;e=r.map(function(e,t){return{value:e.product,text:e.name,key:t}});var s=this.state.ui[n],u=this.state.order,m=u.map(function(e){return(parseFloat(e.price)*parseFloat(e.quant)).toFixed(2)});m.length>0&&(t=m.reduce(function(e,t){return(parseFloat(e)+parseFloat(t)).toFixed(2)}));var d=s[1].concat(" ",s[o+1]);return c.a.createElement("div",{className:"custom-form"},c.a.createElement(q.a,{horizontal:!0},d),c.a.createElement(Ne,{lan:n,category:o,items:e,onAddItem:this.onAddItem,onItemSelect:l}),c.a.createElement(Le,{stat:!1,lan:n,cart:u,onDelete:this.onDeleteItem}),c.a.createElement(q.a,{horizontal:!0},"\u25cb"),c.a.createElement(B.a,{as:i.b,to:"/cart",width:8,disabled:0===this.state.order.length,color:"orange",className:"submit-but",content:s[1].concat(": ",t.toString()),onClick:this.onOrder}))}}]),t}(c.a.Component),Ie=Object(m.b)(function(e){return{facs:e.facs,cart:e.cart,order:e.order,user:e.user}},{addCart:function(e){return{type:"CART_LIST",order:e}}})(Re),De=function(e){var t=e.entry,a=e.mode,n=e.lan,r=e.open,l=(e.view,{en:["Orders","MENU >","CLOSED","This Bakery is closed. Try again later..."],es:["Pedidos","CARTA >","CERRADO","La panaderia esta cerrada. Checkea mas tarde..."],bg:["\u041f\u043e\u0440\u044a\u0447\u043a\u0438","\u041c\u0415\u041d\u042e >","\u0417\u0410\u0422\u0412\u041e\u0420\u0415\u041d\u041e","\u041f\u0435\u043a\u0430\u0440\u043d\u0430\u0442\u0430 \u0435 \u0437\u0430\u0442\u0432\u043e\u0440\u0435\u043d\u0430! \u041e\u043f\u0438\u0442\u0430\u0439 \u043f\u043e-\u043a\u044a\u0441\u043d\u043e..."]}),s=Object(o.useState)(!1),u=Object(Oe.a)(s,2),m=u[0],d=u[1],p={position:"relative",backgroundImage:"url(img/".concat(["pizza","pi2","drinks","pivo","sauce"][t.category-1],"/").concat(t.list,".png)"),backgroundSize:"cover"},h=t.dscr.split(",").join(", ");return c.a.createElement("div",{className:"ver"===a?"item":"product",style:p},c.a.createElement("span",null,t.name),c.a.createElement("span",{style:{maxWidth:"380px",display:"flex",color:"white",overflowX:"hidden",backgroundColor:"rgba(180,90,0,.5)"}},h),t.category<3&&c.a.createElement("div",{className:"bottom-div"},c.a.createElement(B.a,{size:"small",color:"black",basic:!0,content:"ver"===a?l[n][0]:l[n][1],as:i.b,to:"ver"===a?"/order":"/catalog",onClick:function(e){if(!r&&"ver"===a)return e.preventDefault(),void d(!0)}})),c.a.createElement(ie.a,{header:r?l[n][4]:l[n][2],content:r?l[n][4]:l[n][3],open:m,onConfirm:function(e){return d(!1)},onCancel:function(e){return d(!1)}}))},ze=function(e){var t,a,n,r=e.products,o=e.lan,i=e.category,l=e.view,s=e.onOrder,u=e.item,m=e.facs,d=e.open;t="hor"===l?100*(r.length+1):100,a=r.findIndex(function(e){return e.id===u}),n="hor"===l?{minWidth:"".concat(t,"vw"),left:"-".concat(97.5*(a+1),"vw")}:{};return c.a.createElement("div",{className:"hor"===l?"product-wraper":null},c.a.createElement("div",{className:"hor"===l?"product-list":"catalog",style:n},c.a.createElement("ul",null,"hor"===l?c.a.createElement("li",null,c.a.createElement("div",{className:"product".concat(" ",["pi","pi2","soft","pivo","sauce","premium"][i-1])})):c.a.createElement("li",null,c.a.createElement(q.a,{horizontal:!0},{en:["MENU PIZZA"],es:["MENU PIZZA"],bg:["\u041c\u0415\u041d\u042e \u041f\u0418\u0426\u0418"]}[o][0])),r.map(function(e){return c.a.createElement("li",null,c.a.createElement(De,{lan:o,open:m?m.open:d,mode:l,entry:e,onOrder:s}))}))))},_e=function(e){e.lan;for(var t=e.category,a=e.onCategory,n=e.cats,r={bg:["\u043f\u0438\u0446\u0430","\u03c0\xb2","\u043d\u0430\u043f\u0438\u0442\u043a\u0430","\u0431\u0438\u0440\u0430","\u0441\u043e\u0441"],en:["pizza","\u03c0\xb2","drinks","beer","sauce"],es:["pizza","\u03c0\xb2","drinks","beer","salsa"],icon:["\u03c0","\u03c0\xb2","tint","beer","fire"]},o=[],i=1;i<6;i++)n.includes(i)&&o.push(i);return c.a.createElement("div",null,c.a.createElement("ul",{className:"menu-prod"},o.map(function(e){var n=e===t?"active":"";return c.a.createElement("li",{className:e<3?n.concat(" ","pee"):n,onClick:function(n){e!==t&&a(e)}},e<3?r.icon[e-1]:c.a.createElement(Ce.a,{name:r.icon[e-1],size:"large"}))})))},Te=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={category:1,item:0},a.onCategory=function(e){a.setState({category:e,item:0})},a.onItemSelected=function(e){a.setState({item:e})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lan,a=e.products,n=e.facs,r=this.state,o=r.category,i=r.item,l=n.products.map(function(e){var t=a.find(function(t){return t.id===e.product});return Object.assign(e,t)}),s=l.map(function(e){return e.category}),u=l.filter(function(e){return e.category===o});return c.a.createElement("div",{className:"App-content topped padded"},c.a.createElement(ze,{view:"hor",lan:t,products:u,category:o,item:i,facs:n}),c.a.createElement(_e,{lan:t,cats:s,category:o,onCategory:this.onCategory}),c.a.createElement(Ie,{products:u,category:o,stat:!1,itemSelected:this.onItemSelected,lan:t}))}}]),t}(c.a.Component),Pe=Object(m.b)(function(e){return{lan:e.settings.lan,facs:e.facs,user:e.user,products:e.products}})(Te),xe=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={q:0,category:1},a.onOrder=function(e){console.log(e)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lan,a=(e.city,e.products),n=e.facs,r=this.state.category,o=n.products.map(function(e){var t=a.find(function(t){return t.id===e.product});return Object.assign(e,t)}).filter(function(e){return e.category===r});return c.a.createElement("div",{className:"App-content topped padded"},c.a.createElement(ze,{view:"ver",lan:t,open:n.open,onOrder:this.onOrder,products:o}))}}]),t}(c.a.Component);xe.propType={products:M.a.array.isRequired,city:M.a.number.isRequired,facs:M.a.array.isRequired};var Fe=Object(m.b)(function(e){return{products:e.products,facs:e.facs,city:e.settings.city,lan:e.settings.lan}})(xe),Ue=Object(m.b)(function(e){return{lan:e.settings.lan,isAuth:!!e.user.token}})(function(e){var t=e.isAuth,a=e.lan,n=e.component,r=Object(g.a)(e,["isAuth","lan","component"]);return console.log(t),c.a.createElement(l.b,Object.assign({},r,{render:function(e){return t?c.a.createElement(n,Object.assign({lan:a},e)):c.a.createElement(l.a,{to:"/"})}}))}),Me=Object(m.b)(function(e){return{lan:e.settings.lan,city:e.settings.city,isAdmin:1===e.user.membership,membership:e.user.membership}})(function(e){var t=e.isAdmin,a=e.membership,n=e.city,r=e.lan,o=e.component,i=Object(g.a)(e,["isAdmin","membership","city","lan","component"]);return console.log("Log Admin as: ",a),c.a.createElement(l.b,Object.assign({},i,{render:function(e){return(t||a<128)&&n?c.a.createElement(o,Object.assign({lan:r},e)):n?c.a.createElement(l.a,{to:"/admin"}):c.a.createElement(l.a,{to:"/"})}}))}),qe=a(539),Be=function(e){var t=e.ordered,a=e.pickup,n=e.id,r=(e.data,e.products,e.onClick);return c.a.createElement(qe.a.Row,{onClick:function(e){return r(n)}},c.a.createElement(qe.a.Column,{width:8},n),c.a.createElement(qe.a.Column,{width:4},t?"".concat(t.getHours(),":").concat(t.getMinutes()):"--"),c.a.createElement(qe.a.Column,{width:4},a?"".concat(a.getHours(),":").concat(a.getMinutes()):"--"))},Ge=Object(m.b)(function(e){return{products:e.products}})(function(e){var t=e.data,a=e.products,n=t.length>1?t.map(function(e){return{p:a.find(function(t){return t.id===e.item}),q:e.quant,opt:e.options}}):{p:a.find(function(e){return e.id===t.item}),q:t.quant,opt:t.options};return n.length>1?n.map(function(e){return c.a.createElement(qe.a.Row,{className:"detail nopadd"},c.a.createElement(qe.a.Column,{width:8},e.p.name),c.a.createElement(qe.a.Column,{width:4},e.q),c.a.createElement(qe.a.Column,{width:4},c.a.createElement(B.a,{size:"small",icon:"eye"})))}):c.a.createElement(qe.a.Row,{className:"detail nopadd"},c.a.createElement(qe.a.Column,{width:8},n.p.name),c.a.createElement(qe.a.Column,{width:4},n.q),c.a.createElement(qe.a.Column,{width:4},c.a.createElement(B.a,{size:"small",icon:"eye"})))}),He=function(e){var t=e.lan,a=e.list,n=e.data,r=(e.membership,{en:["order #","at","door","for"],es:["order #","de","domic.","para"],bg:["\u043f\u043e\u0440\u044a\u0447\u043a\u0430 #","\u043e\u0442","\u0434\u043e\u0441\u0442.","\u0437\u0430"]}[t]),i=Object(o.useState)(null),l=Object(Oe.a)(i,2),s=l[0],u=l[1];return c.a.createElement(qe.a,{celled:!0,className:"nopadd"},c.a.createElement(qe.a.Row,null,c.a.createElement(qe.a.Column,{width:8},r[0]),c.a.createElement(qe.a.Column,{width:4},c.a.createElement(Ce.a,{name:"clock"})),c.a.createElement(qe.a.Column,{width:4},c.a.createElement(Ce.a,{name:"clock outline"}))),a.map(function(e){var t=n.filter(function(t){return t.id===e}),a=t.length>1?t.map(function(e){return e.rest}):t[0].rest,r=t[0],o=r.id,i=r.ordered_at,l=r.pick_up_time;return c.a.createElement(qe.a,{celled:!0,className:"order nopadd"},c.a.createElement(Be,{key:o,id:o,onClick:function(e){return u(o)},ordered:new Date(i),pickup:new Date(l)}),s===o&&c.a.createElement(Ge,{data:a}))}))},Je=Object(m.b)(function(e){return{uid:e.user.uid,socket:e.settings.socket,order_counter:e.settings.order_counter,lan:e.settings.lan,membership:e.user.membership,fac:e.facs}},{getOrders:function(e){return function(t){return new Promise(function(t,a){C.collection(e).then(function(e){var a=e.data;t(a)}).catch(function(e){return a(e)})})}},setInterface:j})(function(e){var t=e.uid,a=e.lan,n=e.fac,r=e.membership,i=e.order_counter,l=(e.socket,e.getOrders),s=e.setInterface,u={ui:{en:["Bakery: ","Open Session","New Orders: "],es:["Panader\xeda: ","Iniciar sesi\xf3n","Nueva Orden: "],bg:["\u041f\u0435\u043a\u0430\u0440\u043d\u0430: ","\u041e\u0442\u0432\u043e\u0440\u0438 \u0421\u0435\u0441\u0438\u044f","\u041d\u043e\u0432\u0438 \u043f\u043e\u0440\u044a\u0447\u043a\u0438: "]}},m=Object(o.useState)([]),d=Object(Oe.a)(m,2),p=d[0],h=d[1],f=Object(o.useState)([]),b=Object(Oe.a)(f,2),g=b[0],E=b[1];return c.a.createElement("div",{className:"init padded oval-but"},c.a.createElement(q.a,{horizontal:!0},"".concat(u.ui[a][0]).concat(n.name)),c.a.createElement(He,{data:p,list:g,member:r,lan:a}),c.a.createElement("br",null),c.a.createElement(B.a,{fluid:!0,color:"blue",content:"".concat(u.ui[a][2],": ").concat(i),onClick:function(e){n.uid===t&&l(n.id).then(function(e){var t=e.map(function(e){return e.id});h(e),E(Array.from(new Set(t))),s({order_counter:0})}).catch(function(e){return console.log(e.message)})}}))}),We=function(e){e.member,e.lan;return c.a.createElement("div",{className:"oval-but"},c.a.createElement("p",null,"Test.Table here"))},Ye=a(532),Ze=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={checkin:!1,open:!1,dlvr:!1,pod:!1,ui:{en:["SHUTDOWN","Rest","Controls:","ON","OFF","PoD","Delivery"],es:["CERRAR","Descanzo","Controles:","ON","OFF","PoD","Domicilio"],bg:["\u0417\u0410\u0422\u0412\u041e\u0420\u0418","\u041f\u043e\u0447\u0438\u0432\u043a\u0430","\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u0438:","ON","OFF","PoD","\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"]}},a.onChange=function(e,t){var n=t.name;a.setState(function(e){return Object(Y.a)({},n,!e[n])});var r=a.props,o=r.setFac,c=r.socketCounter,i=r.id;switch(o({data:Object(Y.a)({},n,!a.state[n]),id:i}),n){case"checkin":a.state.checkin?Ee(i):be(c);break;case"open":ge(null,JSON.stringify({fac:a.props.fac.id,open:!a.state.open}))}},a.closeShop=function(e,t){var n=t.name;a.props.setFac({id:a.props.id,data:{open:!1,checkin:!1}}),ge(null,JSON.stringify({fac:a.props.fac.id,open:!1})),a.setState(function(e){return{open:!1,checkin:"close"!==n&&e.checkin}})},a.switchPod=function(){a.setState(function(e){return{pod:!e.pod}})},a.componentDidMount=function(){console.log("Baker Home: ",a.props.fac);var e=a.props.fac,t=e.checkin,n=e.open,r=e.delivery;a.setState({checkin:!!t,open:!!n,dlvr:4!==r})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.state.ui[this.props.lan];return c.a.createElement("div",{className:"oval-but"},c.a.createElement(q.a,{horizontal:!0},e[2]),c.a.createElement(qe.a,{columns:2},c.a.createElement(qe.a.Row,null,c.a.createElement(qe.a.Column,null,c.a.createElement(Ye.a,{name:"checkin",checked:this.state.checkin,disabled:this.state.open,label:c.a.createElement("label",null,this.state.checkin?"Check-out":"Check-in"),onChange:this.onChange,toggle:!0})),c.a.createElement(qe.a.Column,null,c.a.createElement(Ye.a,{name:"open",checked:this.state.open,disabled:!this.state.checkin,label:c.a.createElement("label",null,this.state.open?"Close":"Open"),onChange:this.onChange,toggle:!0})))),c.a.createElement("br",null),c.a.createElement(qe.a,null,c.a.createElement(qe.a.Row,{columns:2},c.a.createElement(qe.a.Column,null,c.a.createElement(B.a,{fluid:!0,color:"blue",icon:"motorcycle",disabled:!this.state.checkin||4===this.props.fac.delivery,content:this.state.dlvr?"".concat(e[6],": ").concat(e[4]):"".concat(e[6],": ").concat(e[3]),onClick:this.closeShop})),c.a.createElement(qe.a.Column,null,c.a.createElement(B.a,{fluid:!0,color:"grey",icon:"sign-out",disabled:!0,content:this.state.pod?"".concat(e[5],": ").concat(e[4]):"".concat(e[5],": ").concat(e[3]),onClick:this.switchPod})))),c.a.createElement("br",null),c.a.createElement(B.a,{fluid:!0,color:"grey",name:"pause",icon:"pause",content:e[1],disabled:!0,onClick:this.closeShop}),c.a.createElement("br",null),c.a.createElement(B.a,{fluid:!0,color:"red",name:"close",icon:"attention",disabled:!this.state.open||!this.state.checkin,content:e[0],onClick:this.closeShop}))}}]),t}(c.a.Component),Ve=Object(m.b)(function(e){return{lan:e.settings.lan,fac:e.facs}},{socketCounter:L,setFac:function(e){return function(t){return y.setupFac(e).then(function(){var a=e.data;t(S(a))})}}})(Ze),Xe=Object(m.b)(function(e){return{customers:e.settings.customer_counter,orders:e.settings.order_counter,fac:e.facs.id}})(function(e){var t=e.member,a=e.fac,n=e.lan,r=e.customers,o=e.orders,i={en:["Boss","Lab","Fac","Baker","Courier","Tester"],es:["Boss","Lab","Fac","Baker","Courier","Tester"],bg:["Boss","Lab","Fac","Baker","Courier","Tester"]}[n],l=Math.log2(t);return c.a.createElement("div",null,c.a.createElement(q.a,{horizontal:!0},i[l]," Dashboard"),c.a.createElement(qe.a,{className:"nopadd"},c.a.createElement(qe.a.Row,{columns:2},c.a.createElement(qe.a.Column,null,c.a.createElement(Ce.a,{name:"user"})),c.a.createElement(qe.a.Column,null,c.a.createElement(Ce.a,{name:"clipboard list"}))),c.a.createElement(qe.a.Row,{columns:2},c.a.createElement(qe.a.Column,null,c.a.createElement("div",{className:"circle-div"},c.a.createElement("h2",null,r.filter(function(e){return e===a}).length||0))),c.a.createElement(qe.a.Column,null,c.a.createElement("div",{className:"circle-div"},c.a.createElement("h2",null,o||64))))))}),Ke=function(){return c.a.createElement("div",{className:"oval-but"},c.a.createElement(q.a,{horizontal:!0},"Tester Demo"),c.a.createElement("p",null,"As a potential partner you can find your-self as a LAB-owner (BOSS), a FAC-owner (Baker) or Delivery-courier.",c.a.createElement("br",null),"Choose a Role to test:"),c.a.createElement(B.a,{fluid:!0,color:"black",content:"Role: BOSS"}),c.a.createElement("br",null),c.a.createElement(B.a,{fluid:!0,color:"orange",content:"Role: Baker"}),c.a.createElement("br",null),c.a.createElement(B.a,{fluid:!0,color:"grey",content:"Role: Courier"}),c.a.createElement("br",null),c.a.createElement(q.a,{horizontal:!0}," --- "),c.a.createElement("p",null,"To learn more about business Partner-options:"),c.a.createElement(B.a,{color:"blue",content:"Business Plans"}))},Qe=Object(m.b)(null,{setInterface:j,userSignedIn:D})(function(e){var t,a=e.lan,n=e.member,r=(e.id,e.fowner),o=e.baker,i=e.uid,l=e.setInterface,s=e.userSignedIn,u={en:["Unauthorized User!","Not your ","Please, change ","Zone/City","Bakery","LAB","FAC"],es:["Usuario no otorizado!","No es tu ","Porfavor, cambie ","Zone/City","Bakery","LAB","FAC"],bg:["\u041d\u0435\u0443\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u0430\u043d \u0434\u043e\u0441\u0442\u044a\u043f!","\u041d\u0435 \u0441\u0438 \u0432 \u0442\u0432\u043e\u044f\u0442\u0430 ","\u0421\u043c\u0435\u043d\u0438 ","\u0417\u043e\u043d\u0430/\u0413\u0440\u0430\u0434","\u041f\u0435\u043a\u0430\u0440\u043d\u0430","\u041b\u0410\u0411","\u0424\u0410\u041a"]};switch(n){case 1:t=1===i;break;case 4:t=r===i;break;case 8:case 12:t=o===i;break;default:t=!0}return c.a.createElement("div",{className:"init top-15 padded oval-but"},8===n&&c.a.createElement(Ve,e),64===n&&c.a.createElement(Ke,e),c.a.createElement(Xe,e),c.a.createElement(ie.a,{header:"".concat(u[a][0]),content:8===n?"".concat(u[a][1]," ").concat(u[a][4],". ").concat(u[a][2]," ").concat(u[a][4]):"".concat(u[a][1]," ").concat(u[a][3],". ").concat(u[a][2]," ").concat(u[a][3]),open:!t,onCancel:function(e){localStorage.clear(),I(),s({}),Ee(),l({socket:!1})},onConfirm:function(e){return l({city:null})}}))}),$e=Object(m.b)(function(e){return{uid:e.user.uid,membership:e.user.membership,fac:e.facs}},{userSignedIn:D,setInterface:j})(function(e){var t=e.uid,a=e.lan,n=e.membership,r=e.userSignedIn,o=e.setInterface,s=(e.dispatch,Object(g.a)(e,["uid","lan","membership","userSignedIn","setInterface","dispatch"])),u={ui:{en:["Bakery: ","Open Session","boss","lab","fac","baker","delivery","tester","logout"],es:["Panader\xeda: ","Iniciar sesi\xf3n","boss","lab","fac","baker","delivery","tester","logout"],bg:["\u041f\u0435\u043a\u0430\u0440\u043d\u0430: ","\u041e\u0442\u0432\u043e\u0440\u0438 \u0421\u0435\u0441\u0438\u044f","boss","lab","fac","baker","delivery","tester","logout"]}},m=s.match.url;return c.a.createElement("div",{className:"App-content topped padded"},c.a.createElement("div",{className:"menu-bar dobletopped"},c.a.createElement(B.a.Group,{color:"grey"},c.a.createElement(B.a,{name:"home",as:i.b,to:m,icon:"home"}),1===n&&c.a.createElement(B.a,{name:u.ui[a][2],as:i.b,to:"".concat(m,"/").concat(u.ui[a][2]),content:u.ui[a][3]}),2===n&&c.a.createElement(B.a,{name:u.ui[a][3],as:i.b,to:"".concat(m,"/").concat(u.ui[a][3]),content:u.ui[a][3]}),4===n&&c.a.createElement(B.a,{name:u.ui[a][4],as:i.b,to:"".concat(m,"/").concat(u.ui[a][4]),content:u.ui[a][4]}),8===n&&c.a.createElement(B.a,{name:u.ui[a][5],as:i.b,to:"".concat(m,"/").concat(u.ui[a][5]),content:u.ui[a][5],onClick:function(e){if(!s.fac.open)return e.preventDefault()}}),32===n&&c.a.createElement(B.a,{name:u.ui[a][6],as:i.b,to:"".concat(m,"/").concat(u.ui[a][6]),content:u.ui[a][6]}),64===n&&c.a.createElement(B.a,{name:u.ui[a][7],as:i.b,to:"".concat(m,"/").concat(u.ui[a][7]),icon:"eye",content:u.ui[a][7]}),c.a.createElement(B.a,{name:u.ui[a][8],as:i.b,to:m,icon:"stop circle outline",color:"blue",content:u.ui[a][8],onClick:function(e){return localStorage.clear(),I(),r({}),Ee(),void o({socket:!1})}}))),c.a.createElement(l.d,null,c.a.createElement(l.b,{path:s.match.url,exact:!0,render:function(){return c.a.createElement(Qe,{lan:a,id:s.fac.id,fowner:s.fac.uid,baker:s.fac.baker,uid:t,member:n})}}),c.a.createElement(l.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][2]),component:Qe}),c.a.createElement(l.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][3]),component:Qe}),c.a.createElement(l.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][4]),component:Qe}),c.a.createElement(l.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][5]),component:Je}),c.a.createElement(l.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][6]),component:Qe}),c.a.createElement(l.b,{path:"".concat(s.match.url,"/").concat(u.ui[a][7]),render:function(){return c.a.createElement(We,{lan:a,member:n})}})))}),et=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{es:["Su Pedido","No haz jugado hoy!","No haz comido hoy!","Coma mas..."],en:["Repeat this:","You've played 0 Games today!","You haven't eaten today!","Start now..."],bg:["\u041f\u043e\u0432\u0442\u043e\u0440\u0438: ","\u041d\u0435 \u0441\u0438 \u0438\u0433\u0440\u0430\u043b \u0434\u043d\u0435\u0441!","\u041d\u0435 \u0441\u0438 \u044f\u043b \u0434\u043d\u0435\u0441!","\u0417\u0430\u043f\u043e\u0447\u043d\u0438 \u0441\u0435\u0433\u0430..."]}},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.lan,t=this.state.ui[e];return c.a.createElement("div",{className:"App-content central padded"},c.a.createElement("div",{className:"margined full-width"},c.a.createElement(q.a,{horizontal:!0},t[0]),c.a.createElement(ae.a,{negative:!0},c.a.createElement(ae.a.Header,null,t[2]),c.a.createElement("p",null,t[3]))))}}]),t}(c.a.Component),tt=function(e){var t=e.lan,a=(e.pass,e.login);return c.a.createElement("div",{className:"App-content padded Admin-Page"},c.a.createElement(ne,{submit:a,lan:t,pass:!0}))},at=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{es:["Su Pedido","Por ahora no hay juegos","Vuelva pronto..."],en:["Play Home","No Games to play yet","Come back soon..."],bg:["\u0418\u0433\u0440\u0438","\u041d\u044f\u043c\u0430 \u0438\u0433\u0440\u0438 \u0437\u0430 \u0441\u0435\u0433\u0430","\u041f\u0440\u043e\u0432\u0435\u0440\u0438 \u043e\u0442\u043d\u043e\u0432\u043e \u0441\u043a\u043e\u0440\u043e..."]}},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.lan,t=this.state.ui[e];return c.a.createElement("div",{className:"App-content central padded"},c.a.createElement("div",{className:"margined full-width"},c.a.createElement(q.a,{horizontal:!0},t[0]),c.a.createElement(ae.a,{negative:!0},c.a.createElement(ae.a.Header,null,t[1]),c.a.createElement("p",null,t[2]))))}}]),t}(c.a.Component),nt=function(e){var t=e.ind,a=e.prime,n=(e.lan,e.view),r=e.row,o=e.stat,l=e.edit,s=e.locClick,u=e.current;console.log("ULocation row: ",u,r.location,r.prime);var m=r.prime?" selected-row":"";return c.a.createElement("div",{className:"ui grid item"+m},c.a.createElement("div",{className:"two wide column nopad items"},!o&&a?c.a.createElement(Ce.a,{name:"pin"}):"",o&&"select"===n&&c.a.createElement(Ye.a,{checked:u===r.location||!!r.prime&&0===u,onChange:function(){return s(r.location)}})),c.a.createElement("div",{className:"eight wide column nopad"},r.street),c.a.createElement("div",{className:"two wide column nopad"},r.number||r.location),c.a.createElement("div",{className:"two wide column nopad"},!o&&c.a.createElement("span",{basic:!0,onClick:null},c.a.createElement(Ce.a,{color:"red",name:"minus circle"}))),c.a.createElement("div",{className:"two wide column nopad"},l&&c.a.createElement(i.b,{to:"/user/location/"+t},c.a.createElement(Ce.a,{color:"blue",name:"pencil"}))))},rt=function(e){var t=e.stat,a=e.view,n=e.lan,r=e.list,o=e.city,l=e.onLocation,s=e.current,u=e.disabled,m=e.fac,d={en:["No Locations","Address","\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!"],es:["No tienes Direcci\xf3n","Direcci\xf3n","\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!"],bg:["\u041d\u044f\u043c\u0430\u0448 \u0410\u0434\u0440\u0435\u0441!","\u0410\u0434\u0440\u0435\u0441","\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!"],error:{en:["No Delivery Service!","Your Location has no Delivery Service! Take your pedido from: "],es:["Sin Domcilio!","Esta localidad no tiene servicio a Domicilio. Recibe su pedido a la direcci\xf3n: "],bg:["\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!","\u0422\u043e\u0437\u0438 \u0440\u0430\u0439\u043e\u043d \u0435 \u0431\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438. \u0412\u0437\u0435\u043c\u0438 \u0441\u0432\u043e\u044f\u0442\u0430 \u043f\u043e\u0440\u044a\u0447\u043a\u0430 \u043e\u0442 \u0430\u0434\u0440\u0435\u0441: "]}};return c.a.createElement("div",{className:r&&0!==r.length?"order-list":"order-list empty"},u&&c.a.createElement(ae.a,{negative:!0},c.a.createElement(ae.a.Header,null,d.error[n][0]),c.a.createElement("p",null,d.error[n][1]),c.a.createElement("b",null,"'".concat(m.street,"', ").concat(m.number))),u||r&&0!==r.length?c.a.createElement("div",null,r.forEach(function(e,r){if(e.city===o)return c.a.createElement(nt,{key:r,ind:r,prime:e.prime,current:s,locClick:l,lan:n,row:e,view:a,edit:!0,stat:t})})):c.a.createElement("div",null,c.a.createElement("div",null,d[n][0]),c.a.createElement("br",null),c.a.createElement("div",{className:"oval-but"},c.a.createElement(B.a,{as:i.b,to:"../user/locations",color:"red",icon:"warning sign",content:d[n][1]}))))},ot=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["Order","Where to:","Order:","Cancel","Add","You must give us a location!","Oreder recieved","Tu Pick up","Or","Success","Error","CLOSED"],es:["Orden","Para donde:","Pedir","Cancelar","M\xe1s","Necesitamos direcci\xf3n de entrega!","Pedido recibido","Para recojer","O","Exitoso","Error","CERRADO"],bg:["\u041f\u043e\u0440\u044a\u0447\u043a\u0430","\u0417\u0430 \u043a\u044a\u0434\u0435:","\u041f\u043e\u0440\u044a\u0447\u0430\u0439","\u041e\u0442\u043a\u0430\u0436\u0438","\u041e\u0449\u0435","\u0422\u0440\u044f\u0431\u0432\u0430 \u043d\u0438 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430!","\u041f\u043e\u0440\u044a\u0447\u043a\u0430\u0442\u0430 \u0435 \u043f\u0440\u0438\u0435\u0442\u0430","\u0417\u0430 \u0412\u0437\u0435\u043c\u0430\u043d\u0435","\u0418\u043b\u0438","\u0427\u0435\u0441\u0442\u0438\u0442\u043e!","!\u0413\u0440\u0435\u0448\u043a\u0430!","\u0417\u0410\u0422\u0412\u041e\u0420\u0415\u041d\u041e"]},currentLocation:0,delivery:1,message:{}},a.onLocationSlected=function(e){console.log(e),a.setState({currentLocation:e,message:{}})},a.onOrder=function(e){var t,n=0,r=a.props,o=r.user,c=r.cart,i=r.lan,l=r.fac,s=a.state,u=s.currentLocation,m=s.delivery,d=c.map(function(e){return(parseFloat(e.price)*parseFloat(e.quant)).toFixed(2)}).reduce(function(e,t){return(parseFloat(e)+parseFloat(t)).toFixed(2)});if(m){if(o.locations.forEach(function(e){e.prime&&0!==e.prime&&(n=e.id,console.log("Deliver ",n))}),!n&&!u)return void a.setState({message:{stat:a.state.ui[i][5]}});t=0!==u?u:n,a.props.makeCart({user_location:t,cart:c,delivery:m,fac_id:l.id,total:d}).then(function(e){a.setState({message:{stat:e}}),ge(null,JSON.stringify({user:o.uid,mem:o.membership,fac:l.id,ordered:!0}))}).catch(function(e){return a.setState({message:{err:e}})})}else a.props.makeCart({user_location:null,cart:c,delivery:m,fac_id:l.id,total:d}).then(function(e){a.setState({message:{stat:e}}),ge(null,JSON.stringify({user:o.uid,mem:o.membership,fac:l.id,ordered:!0}))}).catch(function(e){return a.setState({message:{err:e}})})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user.locations,t=this.props,a=t.fac,n=t.getLocationData;4===a.delivery&&this.setState({delivery:0}),e&&0!==e.length&&e.forEach(function(e,t){n(e.location,t)})}},{key:"render",value:function(){var e=0,t=this.props,a=t.user,n=t.cart,r=t.lan,o=t.city,l=t.fac,s=this.state,u=s.currentLocation,m=s.message,d=s.delivery,p=this.state.ui[r];a.locations&&a.locations.forEach(function(e){e.prime});var h=n.map(function(e){return(parseFloat(e.price)*parseFloat(e.quant)).toFixed(2)});return h.length>0&&(e=h.reduce(function(e,t){return(parseFloat(e)+parseFloat(t)).toFixed(2)})),console.log(h,n),c.a.createElement("div",{className:"App-content topped padded"},c.a.createElement(q.a,{horizontal:!0},p[1]),a.locations||4===l.delivery?c.a.createElement(rt,{view:"select",stat:!0,disabled:4===l.delivery,current:u,onLocation:this.onLocationSlected,list:a.locations?a.locations.filter(function(e){return e.city===o}):[],city:o,lan:r,fac:l}):c.a.createElement("div",null,c.a.createElement(B.a,{as:i.b,to:"../user/locations",color:"red",icon:"warning sign",content:p[1]})),Object.keys(m).length>0&&!!d&&c.a.createElement(ae.a,{negative:!0,content:m.stat}),4!==l.delivery&&c.a.createElement(q.a,{horizontal:!0},p[8]),4!==l.delivery&&c.a.createElement("div",{className:"oval-but"},c.a.createElement(B.a,{fluid:!0,content:p[7],icon:"hand paper",color:"blue"})),c.a.createElement(q.a,{horizontal:!0},p[0]),Object.keys(m).length>0?c.a.createElement(ae.a,{positive:m.stat,negative:m.error},c.a.createElement(ae.a.Header,null,m.stat?p[9]:p[10]),c.a.createElement("p",null,m.stat?m.stat:m.err)):c.a.createElement(Le,{stat:!0,cart:n,lan:r}),c.a.createElement(q.a,{horizontal:!0},"\u25cb"),c.a.createElement("div",{className:"menu-bar"},c.a.createElement(B.a.Group,null,c.a.createElement(B.a,{color:"grey",onClick:this.props.cancelCart,as:i.b,to:"/",content:p[3]}),c.a.createElement(B.a,{name:"submit",disabled:0===e||!a.locations&&4!==l.delivery||!l.open,color:"orange",onClick:this.onOrder,content:p[2].concat(" ",e.toString())}),c.a.createElement(B.a,{color:"grey",as:i.b,to:"/order",icon:"plus",content:p[4]}))),!l.open&&c.a.createElement("div",{className:"fac-lable"},c.a.createElement("div",{className:"fac-closed"},c.a.createElement("h3",null,p[11]))))}}]),t}(c.a.Component);ot.propType={lan:M.a.string.isRequired,user:M.a.shape({uid:M.a.number.isRequired}),cart:M.a.array.isRequired,city:M.a.number.isRequired};var ct=Object(m.b)(function(e){return{lan:e.settings.lan,user:e.user,fac:e.facs,cart:e.cart,city:e.settings.city}},{getLocationData:x,cancelCart:function(){return{type:"CART_CLEAR"}},makeCart:function(e){return function(t){return new Promise(function(a,n){C.pushOrder(e).then(function(e){t({type:"CART_CLEAR"}),a(e.message)}).catch(function(e){n(e.response.statusText)})})}}})(ot),it=function(e){var t=e.lan,a=e.has_perks,n=e.new_user,r=e.perks,o={ui:{bg:["\u0418\u043c\u0430\u0448","\u041d\u044f\u043c\u0430\u0448","\u0431\u043e\u043d\u0443\u0441\u0438!..."],en:["You have","You have No","perks!..."],es:["Tienes","No tienes","obsequios!"]}};return c.a.createElement("div",null,a||n?"".concat(o.ui[t][0]," ").concat(r.length," ").concat(o.ui[t][2]):"".concat(o.ui[t][1]," ").concat(o.ui[t][2]))},lt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["Your Locations:","New","Edit","Dashboard:","Your Perks:"],es:["Tus direciones:","Nueva","Editar","Controles:","Tus obsequios:"],bg:["\u0422\u0432\u043e\u0438\u0442\u0435 \u0410\u0434\u0440\u0435\u0441\u0438:","\u0410\u0434\u0440\u0435\u0441","\u041f\u0440\u043e\u043c\u0435\u043d\u0438","\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u0438:","\u0422\u0432\u043e\u0438\u0442\u0435 \u043d\u0430\u0433\u0440\u0430\u0434\u0438:"]}},a.getLocData=function(e){e.forEach(function(e,t){a.props.getLocationData(e.location,t)})},a.logout=function(){console.log("Logout this User"),localStorage.clear(),I(),a.props.userSignedIn({}),Ee(),a.props.setInterface({socket:!1,city:null})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.locations;e&&0!==e.length&&this.getLocData(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;t&&(e.locations&&e.locations.length===t.length||this.getLocData(t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.lan,n=t.user,r=t.city,o=t.fac,l=this.state.ui[a],s=n.locations?n.locations.filter(function(e){return e.city===r}):[];return c.a.createElement("div",{className:"App-content topped padded oval-but"},c.a.createElement(q.a,{horizontal:!0},l[0]),c.a.createElement(rt,{disabled:4===o.delivery,view:"list",stat:!1,fac:o,list:s,lan:a}),(4!==o.delivery||0!==s.length)&&c.a.createElement(q.a,{horizontal:!0},"\u25cb"),(4!==o.delivery||0!==s.length)&&c.a.createElement("div",{className:"row centered menu-bar"},c.a.createElement(B.a.Group,{color:"grey",widths:"2"},c.a.createElement(B.a,{as:i.b,to:"/",icon:"home"}),c.a.createElement(B.a,{disabled:4===o.delivery,as:i.b,to:"/user/locations",icon:"plus",content:l[1]}))),c.a.createElement(q.a,{horizontal:!0},l[3]),c.a.createElement(q.a,{horizontal:!0},l[4]),c.a.createElement(it,{lan:a,has_perks:n.free_pizza,new_user:n.new_user}),c.a.createElement(q.a,{horizontal:!0}),c.a.createElement(B.a,{fluid:!0,color:"red",content:"LOGOUT",as:i.b,to:"/",onClick:function(t){e.logout()}}))}}]),t}(c.a.Component);lt.propType={lan:M.a.number.isRequired,city:M.a.number.isRequired,facs:M.a.shape({delivery:M.a.number.isRequired}).isRequired,user:M.a.shape({locations:M.a.array.isRequired,free_pizza:M.a.bool.isRequired}).isRequired};var st=Object(m.b)(function(e){return{city:e.settings.city,fac:e.facs,user:e.user}},{getLocationData:x,userSignedIn:D,setInterface:j})(lt),ut=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,data:{},value:null},a.resetComponent=function(){return a.setState({isLoading:!1,results:[],value:""})},a.handleResultSelect=function(e,t){var n=t.result,r=t.name,o=n.title,c=n.id,i=a.props,l=i.getInput,s=i.getNumbers,u=i.onNewData;"street"===r&&s("location",c),a.setState(Object(h.a)({},a.state,{value:o,data:Object(h.a)({},a.state.data,Object(Y.a)({},r,c))})),"location"===r&&u(Object(Y.a)({},r,c)),l(o,r)},a.handleSearchChange=function(e,t){var n=t.value,r=t.name;a.setState({isLoading:!0,value:n});var o=a.props,c=o.list,i=o.getInput;setTimeout(function(){if(a.state.value.toString().length<1)return a.resetComponent();var e=new RegExp(se.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,results:se.a.filter(c,function(t){return e.test(t.title.toString())})})},300),i(n,r)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentWillMount",value:function(){this.resetComponent()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results,r=this.props.name;return c.a.createElement("div",null,c.a.createElement("div",{className:"street"===r?"full-width":"short"},c.a.createElement(ue.a,Object.assign({name:r,loading:t,onResultSelect:this.handleResultSelect,onSearchChange:se.a.debounce(this.handleSearchChange,500,{leading:!0}),results:n,value:a},this.props))))}}]),t}(c.a.Component),mt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},ui:{en:["number"],es:["numero"],bg:["\u043d\u043e\u043c\u0435\u0440"]}},a.onChange=function(e,t){var n=t.name,r=t.value;t.key;a.setState({data:Object(h.a)({},a.state.data,Object(Y.a)({},n,Number(r)))});var o=a.props.list;a.props.onNewData(Object(Y.a)({},n,Number(r)));var c=o.findIndex(function(e){return e.id===r});a.props.getInput(o[c].title,n)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e,t=this.state.ui,a=this.props,n=a.name,r=a.list;return r&&(e=r.map(function(e,t){return{key:t+1,value:e.id,text:e.title}})),c.a.createElement("div",{className:"short"},c.a.createElement(te.a.Select,{onChange:this.onChange,name:n,placeholder:t[0],options:e,value:this.state.data[n]||""}))}}]),t}(c.a.Component),dt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["floor","door","entry","bell","mobile","myHome, theOffice,...","Name it like:","Primary"],es:["piso","puerta","entrada","timbre","mobile","miCasa, LaOficina,...","Ponle nombre:","Principal"],bg:["\u0435\u0442\u0430\u0436","\u0432\u0440\u0430\u0442\u0430","\u0432\u0445\u043e\u0434","\u0437\u0432\u044a\u043d\u0435\u0446","\u043c\u043e\u0431\u0438\u043b\u0435\u043d","\u0443\u041d\u0430\u0441, \u043e\u0444\u0438\u0441\u0430, \u043f\u0440\u0438\u041c\u0430\u043c\u0430,...","\u0418\u043c\u0435\u043d\u0443\u0432\u0430\u0439 \u0410\u0434\u0440\u0435\u0441\u0430:","\u041e\u0441\u043d\u043e\u0432\u0435\u043d"]},valid:!0,empty:!0,data:{}},a.onChange=function(e,t){var n,r=t.name,o=t.value;n=isNaN(o)?o:Number(o),a.setState({data:Object(h.a)({},a.state.data,Object(Y.a)({},r,n))}),a.props.edit?a.props.onInput(r,n):a.props.addData(Object(Y.a)({},r,n))},a.onCheckBox=function(e,t){var n=t.name;a.props.onInput(n,a.state.data[n]?Number(!a.state.data[n]):1),a.setState({data:Object(h.a)({},a.state.data,Object(Y.a)({},n,!a.state.data[n]||!a.state.data[n]))})},a.onClear=function(e){e.preventDefault(),a.setState({data:{}})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.edit&&this.setState({data:Object(h.a)({},this.state.data,{prime:this.props.loc.prime})})}},{key:"render",value:function(){var e=this.props,t=e.lan,a=e.edit,n=e.loc,r=this.state.ui[t],o=this.state,i=o.valid,l=o.data;return c.a.createElement(te.a,null,c.a.createElement(te.a.Group,null,c.a.createElement("div",{className:"ui grid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"eight wide column rect"},c.a.createElement(te.a.Input,{onChange:this.onChange,required:!0,name:"bell",placeholder:a&&n.bell?r[3].concat(": ",n.bell):r[3],value:l.bell||""})),c.a.createElement("div",{className:"seven wide column rect"},c.a.createElement(te.a.Input,{onChange:this.onChange,required:!0,name:"mobile",placeholder:a&&n.mobile?n.mobile:r[4],value:l.mobile||""}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"four wide column rect"},c.a.createElement(te.a.Input,{onChange:this.onChange,required:!0,name:"floor",placeholder:a&&n.floor?n.floor.toString().concat(" ",r[0]):r[0],value:l.floor||""})),c.a.createElement("div",{className:"four wide column rect"},c.a.createElement(te.a.Input,{onChange:this.onChange,required:!0,name:"door",placeholder:a&&n.door?n.door.toString().concat(" ",r[1]):r[1],value:l.door||""})),c.a.createElement("div",{className:"four wide column rect"},c.a.createElement(te.a.Input,{onChange:this.onChange,name:"entry",placeholder:a&&n.entry?n.entry.toString().concat(" ",r[2]):r[2],value:l.entry||""})),!a&&c.a.createElement("div",{className:"tree wide column"},c.a.createElement(B.a,{className:"add-but",icon:"ban",onClick:this.onClear}))),a&&c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"eight wide column rect"},c.a.createElement(te.a.Input,{onChange:this.onChange,label:r[6],name:"name",placeholder:n.name?n.name:r[5],value:l.name||""})),c.a.createElement("div",{className:"seven wide column rect"},c.a.createElement(Ye.a,{label:r[7],name:"prime",checked:l.prime||n.prime,onClick:this.onCheckBox})))),!i&&c.a.createElement("div",{className:"margined full-width"},c.a.createElement(ae.a,{negative:!0},c.a.createElement(ae.a.Header,null,r[3]),c.a.createElement("p",null,1)))))}}]),t}(c.a.Component),pt=a(533),ht=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["8 string reference...","Reference:"],es:["8 signos...","Referencia:"],bg:["8 \u0437\u043d\u0430\u043a\u0430 \u043a\u043e\u0434...","\u0420\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f:"]},uid:""},a.onChange=function(e){a.setState({uid:e.target.value})},a.onClick=function(){""!==a.state.uid&&a.props.onRef(a.state.uid)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.state.ui[this.props.lan];return c.a.createElement(pt.a,{action:{color:"teal",labelPosition:"left",icon:"key",content:"".concat(e[1]),onClick:this.onClick},name:"uid",onChange:this.onChange,actionPosition:"left",placeholder:e[0]})}}]),t}(c.a.Component),ft=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["Delivery Location","Your Street in, ","Your Number:","Save","No service on that location","We've got you! Just open the... which door:","Have a reference..?","No ref","No such reference"],es:["Direccion de entrega","Calle-\u043e-Carrera en, ","Tu Numero:","Guardar","No hay servicio en esta direccion","Lo ubicamos! Solo abrenos la... que puerta:","Tienes referencia..?","No tengo","No such reference"],bg:["\u0410\u0434\u0440\u0435\u0441 \u0437\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430","\u0422\u0432\u043e\u044f\u0442\u0430 \u0443\u043b\u0438\u0446\u0430 \u0432\u044a\u0432, ","\u041d\u043e\u043c\u0435\u0440:","\u0417\u0430\u043f\u0430\u0437\u0438","\u041d\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0432\u0430\u043c\u0435 \u0442\u043e\u0437\u0438 \u0430\u0434\u0440\u0435\u0441","\u0422\u0443\u043a \u0441\u043c\u0435! \u0421\u0430\u043c\u043e \u043e\u0442\u0432\u043e\u0440\u0438 \u0432\u0440\u0430\u0442\u0430\u0442\u0430... \u043a\u043e\u044f \u0432\u0440\u0430\u0442\u0430? :","\u0418\u043c\u0430\u0448 \u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f..?","\u041d\u044f\u043c\u0430\u043c","\u041d\u044f\u043c\u0430 \u0442\u0430\u043a\u0430\u0432\u0430 \u0440\u0435\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f"]},data:{},input:{},errors:{},message:!1,location:!1,locate:!1,loc_id:"",rep:!0},a.addData=function(e){console.log("Add in Locations: ",e),a.setState(Object(h.a)({},a.state,{data:Object(h.a)({},a.state.data,e)}))},a.getInput=function(e,t){a.setState({input:Object(h.a)({},a.state.input,Object(Y.a)({},t,e))});var n=t.concat("s"),r=se.a.filter(a.props[n],function(a){return"street"===t?a.title===e:Number(a.title)===e});"location"!==t&&0===r.length?a.setState(Object(Y.a)({errors:Object(Y.a)({},t,t)},t,!1)):a.setState(Object(Y.a)({errors:se.a.omit(a.state.errors,[t])},t,!0))},a.checkReference=function(e){a.props.checkReference(e).then(function(e){e.error?a.setState({message:!0,errors:e.error}):(console.log(e),a.setState({input:Object(h.a)({},a.state.input,e),data:Object(h.a)({},a.state.data,{location:e.id,ref:1}),loc_id:e.id,message:!1,errors:""}))}).catch(function(e){})},a.noRef=function(e){a.setState({rep:!1,loc_id:"",message:!1,errors:""})},a.onSubmit=function(e){!a.state.locate||a.state.rep?(e.preventDefault(),a.saveLocation()):a.submitLocation()},a.saveLocation=function(){if(0===Object.keys(a.state.errors).length){var e=a.state;e.rep,e.loc_id,e.data;a.setState({rep:!1,locate:!0,errors:{},message:!1})}else a.setState({message:!0,errors:4})},a.submitLocation=function(){a.props.userAddLocation(a.state.data)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.city&&this.props.getLocations("street",this.props.city)}},{key:"render",value:function(){var e=this.props,t=e.streets,a=e.lan,n=e.city,r=e.cities,o=e.locations,l=this.state.ui[a],s=this.state,u=s.street,m=s.location,d=s.locate,p=s.message,h=s.input,f=s.rep,b=s.loc_id,g="";return r&&r.forEach(function(e){e.id===n&&(g=e.title)}),c.a.createElement("div",{className:"App-content topped padded"},c.a.createElement(q.a,{horizontal:!0},l[0]),d?c.a.createElement(nt,{onClick:R,row:h,stat:!0,lan:a}):c.a.createElement("p",{className:void 0===u||u?"left":"left warent"},f?l[6]:l[1]+g+":"),f&&c.a.createElement(ht,{lan:a,onRef:this.checkReference}),!d&&!f&&c.a.createElement(ut,{lan:a,name:"street",getInput:this.getInput,onNewData:this.addData,list:t,getNumbers:this.props.getLocations}),o&&o.length>0&&u&&!d&&!f&&c.a.createElement("p",{className:void 0===m||m?"left short":"left short warent"},l[2],c.a.createElement(mt,{name:"location",getInput:this.getInput,onNewData:this.addData,list:o})),d&&c.a.createElement("div",{className:"custom-form"},c.a.createElement(q.a,{horizontal:!0}),c.a.createElement("p",{className:"vintage left"},l[5]),c.a.createElement(dt,{lan:a,addData:this.addData})),c.a.createElement(q.a,{horizontal:!0}),p&&c.a.createElement(ae.a,{positive:this.state.errors<3,negative:this.state.errors>2,content:l[this.state.errors]}),c.a.createElement("div",{className:"column sixteen wide oval-but extra-padded"},f&&c.a.createElement("div",{className:"row centered menu-bar"},c.a.createElement(B.a.Group,{widths:"2"},c.a.createElement(B.a,{color:"grey",disabled:!b||""===b,icon:"thumbs up",content:"OK",onClick:this.onSubmit}),c.a.createElement(B.a,{disabled:b||""!==b,icon:"exclamation circle",color:"blue",content:l[7],onClick:this.noRef}))),!f&&c.a.createElement("div",{className:"row centered menu-bar"},c.a.createElement(B.a.Group,{widths:"2"},c.a.createElement(B.a,{color:"grey",content:"Clear"}),c.a.createElement(B.a,{as:i.b,to:"/user",disabled:!m,basic:!m,color:"black",content:l[3],onClick:this.onSubmit})))))}}]),t}(c.a.Component);ft.propType={lan:M.a.string.isRequired,city:M.a.number.isRequired};var bt=Object(m.b)(function(e){return{city:e.settings.city,street:e.settings.street,cities:e.settings.cities,streets:e.settings.streets,locations:e.user.locations,lan:e.settings.lan}},{getLocations:N,addUserLocation:_,userAddLocation:function(e){return function(t){O.addLocation(e).then(function(a){e.id=a,t(_(e))})}},checkReference:R})(ft),gt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={ui:{en:["Edit this Location:","Save","Cancel","Reset"],es:["Editar Direccion:","Guardar","Cancelar","Omitir"],bg:["\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u0410\u0434\u0440\u0435\u0441:","\u0417\u0430\u043f\u0430\u0437\u0438","\u041d\u0430\u0437\u0430\u0434","\u041e\u0442\u043a\u0430\u0436\u0438"]},input:{}},a.onInput=function(e,t){console.log(e,t),a.setState({input:Object(h.a)({},a.state.input,Object(Y.a)({},e,t))})},a.onSubmit=function(e){var t=a.props,n=t.locations,r=t.match,o=Number(n[r.params.id].id);e.preventDefault(),a.props.userUpdateLocation(r.params.id,o,a.state.input)},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.state.ui[this.props.lan];return c.a.createElement("div",{className:"App-content topped padded"},c.a.createElement(q.a,{horizontal:!0},e[0]),c.a.createElement("div",{className:"custom-form"},c.a.createElement(dt,{edit:!0,lan:this.props.lan,loc:this.props.locations[this.props.match.params.id],onInput:this.onInput})),c.a.createElement(q.a,{horizontal:!0}),c.a.createElement("div",{className:"row centered menu-bar"},c.a.createElement(B.a.Group,{widths:"3"},c.a.createElement(B.a,{as:i.b,to:"/user",content:e[2]}),c.a.createElement(B.a,{color:"grey",content:e[3]}),c.a.createElement(B.a,{color:"blue",icon:"thumbs up",content:e[1],onClick:this.onSubmit}))))}}]),t}(c.a.Component),Et=Object(m.b)(function(e){return{locations:e.user.locations}},{userUpdateLocation:function(e,t,a){return function(n){O.updateLocation(a,t).then(function(t){console.log(t),n(T(e,a))})}}})(gt),vt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},bg:"",lat:"",code:"",number:"",ui:{en:["Street:lat","City:bg","City:lat","#","Next","Edit","Reset","System message:","Country","post","Street:bg","Add Location","Add Street"],es:["Calle:lat","Ciudad:bg","City:lat","#","Seguir","Editar","Cancelar","Mensaje del sistema:","Pais","postal","Calle:bg","Nueva Locacion","Nueva Calle"],bg:["\u0423\u043b\u0438\u0446\u0430:\u043b\u0430\u0442","\u0413\u0440\u0430\u0434:\u0431\u0433","\u0413\u0440\u0430\u0434:\u043b\u0430\u0442","#","\u0417\u0430\u043f\u0430\u0437\u0438","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439","\u0418\u0437\u0447\u0438\u0441\u0442\u0438","\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e \u0441\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435:","\u0414\u044a\u0440\u0436\u0430\u0432\u0430","\u043a\u043e\u0434","\u0423\u043b\u0438\u0446\u0430:\u0431\u0433","\u041d\u043e\u0432 \u0410\u0434\u0440\u0435\u0441","\u041d\u043e\u0432\u0430 \u0423\u043b\u0438\u0446\u0430"]},message:"",msgClosed:!0,locate:!1},a.onReset=function(e){e&&e.preventDefault(),a.setState({data:{},bg:"",lat:"",code:"",locate:!1,msgClosed:!0,message:"",number:""})},a.closeMessage=function(e){e.preventDefault(),a.setState({message:{}})},a.onChange=function(e,t){var n=t.name,r=t.value;r="number"===n?Number(r):r,a.setState(Object(Y.a)({data:Object(h.a)({},a.state.data,Object(Y.a)({},n,r))},n,r))},a.onCity=function(e,t){var n,r=t.name,o=t.value,c=a.state.city,i=a.props.loc,l=c[i].findIndex(function(e){return e.c===o}),s=c[i][l].code;a.setState({data:Object(h.a)({},a.state.data,(n={},Object(Y.a)(n,r,o),Object(Y.a)(n,"post",s),n))})},a.onStreet=function(e){a.setState({data:Object(h.a)({},a.state.data,e)})},a.onSubmit=function(){var e=a.state,t=e.data,n=e.locate,r=a.props,o=r.city,c=r.addLocation,i=o?n?"location":"street":"city";o&&(t.city=o),console.log("POST Location: ",t),c(t,i).then(function(e){a.setState(Object(h.a)({},a.state,e))}),a.onReset()},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.lan,n=t.city,r=t.cities,o=t.streets,i=this.state,l=i.message,s=i.locate,u=this.state.ui[a];return r&&!o?r.bg.map(function(e){return e.c}).sort().map(function(e,t){return{key:t+1,value:e.id,text:e.title}}):o&&o.map(function(e,t){return{key:t+1,value:e.id,text:e.title}}),c.a.createElement(te.a,{onSubmit:this.onSubmit},c.a.createElement(te.a.Group,null,c.a.createElement("div",{className:"ui grid",style:{width:"100vw"}},Object.keys(l).length>0&&c.a.createElement("div",{className:"margined full-width"},c.a.createElement(ae.a,{as:"div",positive:!0,size:"tiny",onDismiss:this.closeMessage,header:u[7],content:l})),!n&&c.a.createElement("div",{className:"row centered"},c.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},c.a.createElement(te.a.Input,{fluid:!0,name:"bg",onChange:this.onChange,value:this.state.bg,placeholder:u[1]})),c.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},c.a.createElement(te.a.Input,{fluid:!0,name:"lat",onChange:this.onChange,value:this.state.lat,placeholder:u[2]})),c.a.createElement("div",{className:"twelve wide column"},c.a.createElement(te.a.Input,{fluid:!0,name:"code",onChange:this.onChange,value:this.state.code,placeholder:u[3]}))),!s&&n&&c.a.createElement("div",{className:"row centered"},c.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},c.a.createElement(te.a.Input,{fluid:!0,name:"bg",onChange:this.onChange,value:this.state.bg,placeholder:u[10]})),c.a.createElement("div",{className:"twelve wide column",style:{marginBottom:"10px"}},c.a.createElement(te.a.Input,{fluid:!0,name:"lat",onChange:this.onChange,value:this.state.lat,placeholder:u[0]})),c.a.createElement("div",{className:"twelve wide column oval-but"},c.a.createElement(B.a,{fluid:!0,disabled:!this.state.data.bg||!this.state.data.lat,type:"submit",content:u[12]}),c.a.createElement(q.a,{horizontal:!0,content:"or"}),c.a.createElement(B.a,{fluid:!0,content:u[11],onClick:function(t){t.preventDefault(),t.stopPropagation(),e.setState({data:{},locate:!0})}}))),s&&c.a.createElement("div",{className:"row centered"},c.a.createElement("div",{style:{marginBottom:"10px"}},!!o.length&&c.a.createElement(me,{appsetup:!1,name:"street_id",list:o,lan:a,onStreet:this.onStreet})),c.a.createElement("div",{className:"six wide column",style:{marginBottom:"10px"}},c.a.createElement(te.a.Input,{fluid:!0,name:"number",onChange:this.onChange,value:this.state.number,placeholder:u[3]}))),c.a.createElement("div",{className:"row centered menu-bar"},c.a.createElement(B.a.Group,{widths:"2",className:"padded"},c.a.createElement(B.a,{color:"grey",onClick:this.onReset,content:u[6]}),c.a.createElement(B.a,{color:"blue",type:"submit",content:u[4]}))))))}}]),t}(c.a.Component),yt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},logging:!1,errors:{},ui:{en:["Check","example@mail.com","my-secret-password","Save"],es:["Consulta","ejemplo@mail.com","mi-contrasena-secreta","Guardar"],bg:["\u041f\u0440\u043e\u0432\u0435\u0440\u0438","example@mail.com","\u0441\u0435\u043a\u0440\u0435\u0442\u043d\u0430\u0442\u0430-\u043c\u0438-\u043f\u0430\u0440\u043e\u043b\u0430","\u0417\u0430\u043f\u0430\u0437\u0438"]}},a.onSubmit=function(){var e=a.state.data,t=a.props,n=t.submit,r=t.login,o=t.init,c=t.pass,i=a.validate(e);a.setState({errors:i}),c||0!==Object.keys(i).length?0===Object.keys(i).length&&(r(e,!0),o()):n(e,!1)},a.validate=function(e){var t={};return a.props.pass?e.password.length<8&&(t.password="Minimum password length must be 8 digits!"):ee.a.isEmail(e.email)||(t.email="Invalid email address! Try again..."),t},a.onInput=function(e,t){var n=t.name;a.setState({data:Object(h.a)({},a.state.data,Object(Y.a)({},n,e.target.value))})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.state.ui[this.props.lan],t=this.props.pass,a=this.state.errors;return c.a.createElement("div",{className:t?"custom-form oval-but alert":"custom-form oval-but"},c.a.createElement(te.a,{onSubmit:this.onSubmit},c.a.createElement(te.a.Input,{fluid:!0,required:!0,inline:!0,centered:!0,focus:!0,onChange:this.onInput,name:t?"password":"email",type:t?"password":"email",placeholder:t?e[2]:e[1]}),Object.keys(a).length>0&&c.a.createElement(ae.a,{negative:!0},c.a.createElement(ae.a.Header,null,t?"Incomplete password:":"Incorrect email:"),c.a.createElement("p",null,t?a.password:a.email)),c.a.createElement(B.a,{type:"submit",color:"grey",fluid:t},t?e[3]:e[0])))}}]),t}(c.a.Component),Ot=function(e){e.admin;var t=e.lan;return c.a.createElement(yt,{submit:function(){},init:function(){},lan:t,pass:!1})},Ct={locations:{addLocation:function(e,t){return v.a.post("/admin/location/"+t,{data:e}).then(function(e){return e.data})},getList:function(e){return v.a.get("/admin/location/city",{data:e}).then(function(e){return console.log(e)})}}},jt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={view:"",ui:{en:["Location in:"],es:["Localidad en:"],bg:["\u0410\u0434\u0440\u0435\u0441 \u0432:"]}},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addLocation,a=e.lan,n=e.city,r=e.cities,o=e.streets,i=e.view,l=this.state.ui[a],s=r.length>0?r.find(function(e){return console.log(e.id),e.id===n}):"";return console.log("city?: ",r.length,s.title),c.a.createElement("div",{className:"topped padded"},c.a.createElement("h3",null,l[0].concat(" ",n?s.alt:"Add City")),c.a.createElement(q.a,{horizontal:!0}),"add"===i&&c.a.createElement("div",{className:"custom-form"},c.a.createElement(vt,{lan:a,city:n,streets:o,addLocation:t})),c.a.createElement(q.a,{horizontal:!0}),"rep"===i&&c.a.createElement(Ot,{admin:!0,lan:a,loc:"bg",addLocation:t}))}}]),t}(c.a.Component),St=Object(m.b)(function(e){return{cities:e.settings.cities,streets:e.settings.streets}},{addLocation:function(e,t){return function(a){return console.log("Add location: ",e,t),Ct.locations.addLocation(e,t).then(function(e){return e})}}})(jt),wt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return c.a.createElement(te.a,null,"email"===this.props.view&&c.a.createElement(te.a.Group,{inline:!0},c.a.createElement(te.a.Input,{width:10,label:"email: ",placeholder:"user@mail.com"})),c.a.createElement(B.a,{content:"Submit"}))}}]),t}(c.a.Component),kt=function(e){var t=e.view;e.lan;return c.a.createElement("div",{className:"topped padded"},"email"===t&&c.a.createElement(wt,{view:t}),"list"===t&&c.a.createElement("div",null,"List Users"))},Nt=function(e){var t=e.lan,a=e.member,n=e.onMenu,r={en:["USER","LOC","PRO","LAB","FAC"],es:["USER","LOC","PRO","LAB","FAC"],bg:["USER","LOC","PRO","LAB","FAC"]};return c.a.createElement(B.a.Group,{color:"blue",widths:r[t].length},r[t].map(function(e,t){return c.a.createElement(B.a,{key:t,disabled:a>1&&Math.log2(a)+2!==t,name:t,content:e,onClick:n})}))},At=function(e){var t=e.lan,a=e.onMenu,n=e.subset;return c.a.createElement(B.a.Group,{color:"blue",className:"submenu"},{en:{user:["home","email","list","order"],pro:["home","add","edit","rep"],loc:["home","add","edit","rep"],fac:["home","add","edit","rep"],lab:["home","add","edit","rep"]},es:{user:["home","email","list","order"],pro:["home","add","edit","rep"],loc:["home","add","edit","rep"],fac:["home","add","edit","rep"],lab:["home","add","edit","rep"]},bg:{user:["home","email","list","order"],pro:["home","add","edit","rep"],loc:["home","add","edit","rep"],fac:["home","add","edit","rep"],lab:["home","add","edit","rep"]}}[t][n].map(function(e,t){return c.a.createElement(B.a,{onClick:a,name:e,content:t?e:"",icon:t?"":"home"})}))},Lt=function(e){function t(){var e,a;Object(Z.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={main:!0,mView:"",sView:"",logged:!1,checkin:!1,ui:{en:["Admin","LAB Admin.","FAC Admin."],es:["Admin","LAB Admin.","FAC Admin."],bg:["\u0410\u0434\u043c\u0438\u043d","LAB \u0410\u0434\u043c\u0438\u043d.","FAC \u0410\u0434\u043c\u0438\u043d."]}},a.onSubMenu=function(e,t){var n=t.name;a.setState({main:"home"===n,sView:n})},a.onMainMenu=function(e,t){var n=t.content,r=t.name;a.setState({main:!1,mView:n.toLowerCase(),indx:r})},a.onCheck=function(e,t){var n=t.name;switch(a.setState(function(e){return Object(Y.a)({},n,!e[n])}),n){case"checkin":a.state.checkin||console.log("Check Boss In-Out");break;case"logged":a.state.logged&&a.closeSession()}},a.closeSession=function(e){localStorage.clear(),I(),a.props.userSignedIn({})},a}return Object(Q.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.city,a=e.getLocations,n=(e.user,e.logedin);t&&(a("street",t),this.setState({logged:n}))}},{key:"render",value:function(){var e=this.props,t=e.lan,a=e.city,n=e.membership,r=this.state,o=r.main,i=r.sView,l=r.mView,s=(this.state.ui[t],o?{left:0}:{left:"-".concat(window.screen.width,"px")});return c.a.createElement("div",{className:"App-content padded Admin-Page"},c.a.createElement(qe.a,null,c.a.createElement(qe.a.Row,null,c.a.createElement(qe.a.Column,{width:6},c.a.createElement(Ye.a,{name:"logged",checked:this.state.logged,disabled:this.state.checkin,label:c.a.createElement("label",null,this.state.login?"Login":"Logout"),onChange:this.onCheck,toggle:!0})),c.a.createElement(qe.a.Column,{width:4}),c.a.createElement(qe.a.Column,{width:6},c.a.createElement(Ye.a,{name:"checkin",checked:this.state.checkin,disabled:!this.state.logged,label:c.a.createElement("label",null,this.state.checkin?"Close":"Open"),onChange:this.onCheck,toggle:!0})))),c.a.createElement("br",null),c.a.createElement("div",{className:"menu-bar carrousel move",style:s},c.a.createElement(Nt,{lan:t,member:n,onMenu:this.onMainMenu}),c.a.createElement(q.a,{horizontal:!0}),!o&&c.a.createElement(At,{member:n,subset:l,lan:t,onMenu:this.onSubMenu})),"email"===i&&c.a.createElement(kt,{view:i,lan:t}),"list"===i&&c.a.createElement(kt,{view:i,lan:t}),"add"===i&&c.a.createElement(St,{city:a||!1,view:i,lan:t}))}}]),t}(c.a.Component),Rt=Object(m.b)(function(e){return{city:e.settings.city,cities:e.settings.cities,membership:e.user.membership,logedin:!!e.user.token}},{getLocations:N,userSignedIn:D})(Lt),It=Object(m.b)(function(e){return{lan:e.settings.lan}})(function(e){var t=e.location;e.lan;return c.a.createElement("div",{className:"App"},c.a.createElement(l.b,{location:t,path:"/",exact:!0,component:ye}),c.a.createElement(l.b,{location:t,path:"/",component:ke}),c.a.createElement(Me,{location:t,path:"/admin/location",exact:!0,component:St}),c.a.createElement(Me,{location:t,path:"/admin/home",component:$e}),c.a.createElement(Me,{location:t,path:"/admin/boss",exact:!0,component:Rt}),c.a.createElement(Ue,{location:t,path:"/admin",exact:!0,component:tt}),c.a.createElement(Ue,{location:t,path:"/order",exact:!0,component:Pe}),c.a.createElement(Ue,{location:t,path:"/catalog",exact:!0,component:Fe}),c.a.createElement(Ue,{location:t,path:"/repeat",exact:!0,component:et}),c.a.createElement(Ue,{location:t,path:"/play",exact:!0,component:at}),c.a.createElement(Ue,{location:t,path:"/cart",exact:!0,component:ct}),c.a.createElement(Ue,{location:t,path:"/user",exact:!0,component:st}),c.a.createElement(Ue,{location:t,path:"/user/locations",exact:!0,component:bt}),c.a.createElement(Ue,{location:t,path:"/user/location/:id",exact:!0,component:Et}))}),Dt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,zt=Object(d.e)(b,{user:{},settings:{lan:"bg",socket:!1,one_city:0,banner:!1,order_counter:0,customer_counter:0},products:[],order:{},cart:[]},Dt(Object(d.a)(p.a)));if(window.GS=zt,localStorage.valePizzaJWT){var _t={new_user:!1};_t.token=localStorage.valePizzaJWT,I(_t.token),zt.dispatch(D(_t)),zt.dispatch(P()).then(function(e){e.locations}).catch(function(e){I(),_t.token="",_t.new_user=!0,zt.dispatch(D(_t)),console.log("initialUser: ",e.response.data.error)})}F("bg"),zt.dispatch(k()),zt.dispatch(A("bg"));var Tt=c.a.createElement(m.a,{store:zt},c.a.createElement(i.a,null,c.a.createElement(l.b,{component:It})));u.a.render(Tt,document.getElementById("root"))}},[[282,1,2]]]);
//# sourceMappingURL=main.f7db071c.chunk.js.map